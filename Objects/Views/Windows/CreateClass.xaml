<Window x:Class="Incas.Objects.Views.Windows.CreateClass"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:conv="clr-namespace:Incas.Core.Converters" xmlns:extended="http://schemas.xceed.com/wpf/xaml/toolkit"
        xmlns:local="clr-namespace:Incas.Objects.Views.Windows" xmlns:fa="http://schemas.fontawesome.io/icons/" xmlns:local1="clr-namespace:Incas.Objects.Converters" xmlns:classes="clr-namespace:Incas.Objects.Views.Controls" xmlns:avalonEdit="http://icsharpcode.net/sharpdevelop/avalonedit" xmlns:system="clr-namespace:System;assembly=mscorlib" xmlns:ngv="clr-namespace:NodeGraph.View;assembly=NodeGraph"
        mc:Ignorable="d"
        Title="Создать класс" Height="750" Width="1000" MinHeight="750" MinWidth="960" WindowStartupLocation="CenterScreen" Style="{StaticResource WindowBase}" Background="{StaticResource Black}" >
    <Window.Resources>
        <ResourceDictionary>
            <local1:FieldTypeToColorConverter x:Key="FieldTypeToColorConverter"/>
            <local1:FieldTypeToVisibleNameConverter x:Key="FieldTypeToVisibleNameConverter"/>
            <local1:FieldTypeToIconConverter x:Key="FieldTypeToIconConverter"/>
            <conv:IEColorToBrushConverter x:Key="IEColorToBrushConverter"/>
            <conv:PathDataToGeometryConverter x:Key="PathDataToGeometryConverter"/>
            <local1:ViewControlTypeToVisibleNameConverter x:Key="ViewControlTypeToVisibleNameConverter"/>
            <local1:ViewControlTypeToIconConverter x:Key="ViewControlTypeToIconConverter"/>
            <local1:ViewControlTypeToColorConverter x:Key="ViewControlTypeToColorConverter"/>
            <local1:MemberTypeToIconConverter x:Key="MemberTypeToIconConverter"/>
            <local1:MethodTypeToPathConverter x:Key="MethodTypeToPathConverter"/>
            <local1:MethodTypeToToolTipConverter x:Key="MethodTypeToToolTipConverter"/>
        </ResourceDictionary>
    </Window.Resources>
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="1*" />
            <ColumnDefinition Width="50"/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="40"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="50"/>
        </Grid.RowDefinitions>


        <TabControl x:Name="TabControlMain" Style="{StaticResource TabControlMain}" Background="{DynamicResource Black}" Margin="0" ItemContainerStyle="{StaticResource TabItemMain}" Grid.RowSpan="2" Grid.ColumnSpan="2">
            <TabItem Header="Определение" BorderBrush="{DynamicResource LightPurple}">
                <Grid Background="{DynamicResource Black}">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="5*" MinWidth="250" />
                        <ColumnDefinition Width="5*" MaxWidth="850"/>
                    </Grid.ColumnDefinitions>

                    <Border CornerRadius="8" Margin="5,5,0,5" Background="{DynamicResource Black}" Grid.Row="1">
                        <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
                            <StackPanel >
                                <!--Internal Name-->
                                <Border Style="{StaticResource ToolBorder}" Height="40">
                                    <Grid Margin="5,0,0,0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="30"/>
                                            <ColumnDefinition/>
                                        </Grid.ColumnDefinitions>
                                        <Path Fill="{DynamicResource Yellow}" Height="16" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="0" Stretch="Uniform" Data="M381.54-537.38 344.23-509q-5.23 3.46-9.69.12-4.46-3.35-2.46-8.81l13.3-44.93-40.3-32.92q-5-3.46-2.89-8.81 2.12-5.34 7.58-5.34h49l15.08-46.69q2-5.47 7.69-5.47t7.69 5.47l15.08 46.69h49q5.46 0 7.57 5.34Q463-599 458-595.54l-40.31 32.92L431-517.69q2 5.46-2.46 8.81-4.46 3.34-9.69-.12l-37.31-28.38Zm0 186.61q-95.92 0-162.58-66.65-66.65-66.66-66.65-162.58 0-95.92 66.65-162.58 66.66-66.65 162.58-66.65 95.92 0 162.58 66.65 66.65 66.66 66.65 162.58 0 41.69-14.77 80.69t-38.77 66.69l236.31 236.31q5.61 5.62 6 13.77.38 8.16-6 14.54-6.39 6.38-14.16 6.38-7.76 0-14.15-6.38L528.92-404.31q-30 25.54-69 39.54t-78.38 14Zm0-40q79.61 0 134.42-54.81 54.81-54.8 54.81-134.42 0-79.62-54.81-134.42-54.81-54.81-134.42-54.81-79.62 0-134.42 54.81-54.81 54.8-54.81 134.42 0 79.62 54.81 134.42 54.8 54.81 134.42 54.81Z"/>
                                        <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center">
                                            <Label Content="Уникальное имя:" FontFamily="{StaticResource Rubik}" Foreground="{DynamicResource GrayLight}" VerticalAlignment="Center" />
                                            <Label Style="{DynamicResource LabelElement}" Content="[" VerticalAlignment="Center" HorizontalAlignment="Left" Foreground="{DynamicResource DarkLight}"/>
                                            <TextBox Style="{DynamicResource TextBoxTransparent}" Text="{Binding InternalName, UpdateSourceTrigger=PropertyChanged, FallbackValue=Неизвестно}" MaxLength="30">
                                                <TextBox.ContextMenu>
                                                    <ContextMenu>
                                                        <MenuItem Header="Копировать" Command="ApplicationCommands.Copy"/>
                                                        <MenuItem Header="Вставить" Command="ApplicationCommands.Paste"/>
                                                    </ContextMenu>
                                                </TextBox.ContextMenu>
                                            </TextBox>
                                            <Label Style="{DynamicResource LabelElement}" Content="]" VerticalAlignment="Center" HorizontalAlignment="Left" Foreground="{DynamicResource DarkLight}"/>
                                        </StackPanel>
                                    </Grid>
                                </Border>
                                <!--Inheritance-->
                                <Border Style="{StaticResource ToolBorder}" Visibility="{Binding InheritanceVisibility}">

                                    <Grid Margin="5">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="30"/>
                                            <ColumnDefinition/>
                                        </Grid.ColumnDefinitions>
                                        <Path Fill="{DynamicResource Yellow}" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="0" Stretch="Uniform" Data="M4.02,19.0346V14.85a.79.79,0,0,1,.8077-.8153h6.2308a.7934.7934,0,0,1,.8077.8078v4.1847a.79.79,0,0,1-.8077.8153H4.8275a.7934.7934,0,0,1-.8077-.8078Zm0-8.1922V6.6576a.79.79,0,0,1,.8077-.8152h6.2308a.7932.7932,0,0,1,.8077.8077v4.1848a.79.79,0,0,1-.8077.8152H4.8275a.7932.7932,0,0,1-.8077-.8077Zm1-.1923H10.866V6.8424H5.02Zm12.94,8.8635a.808.808,0,0,1-.2955-.053.7816.7816,0,0,1-.2672-.1837l-3.3885-3.3883a.4423.4423,0,0,1-.1338-.3415.5053.5053,0,0,1,.1563-.3505.4512.4512,0,0,1,.3312-.137.4575.4575,0,0,1,.3348.1405l2.7652,2.721V6.3424a.5.5,0,1,1,1,0V17.9211L21.2275,15.2a.4845.4845,0,0,1,.339-.14.4663.4663,0,0,1,.3528.14.4568.4568,0,0,1,.137.341.4724.4724,0,0,1-.14.3475l-3.3885,3.3883a.7721.7721,0,0,1-.27.1837A.8276.8276,0,0,1,17.96,19.5136Z"/>
                                        <StackPanel Grid.Column="1" Orientation="Horizontal">
                                            <Label Content="Наследуется от:" FontFamily="{StaticResource Rubik}" Foreground="{DynamicResource GrayLight}" />
                                            <TextBlock Margin="12,5,5,5" Style="{StaticResource TextBlockMain}" TextTrimming="WordEllipsis" Foreground="{DynamicResource GrayLight}" Text="{Binding Inheritance}"/>
                                        </StackPanel>
                                    </Grid>
                                </Border>
                                <!--Basic Options-->
                                <Border Style="{StaticResource ToolBorder}">
                                    <StackPanel>
                                        <Grid Margin="5,5,0,0">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="30"/>
                                                <ColumnDefinition/>
                                            </Grid.ColumnDefinitions>
                                            <Path Fill="{DynamicResource Yellow}" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="0,0,2,0" Data="M7.068.727c.243-.97 1.62-.97 1.864 0l.071.286a.96.96 0 0 0 1.622.434l.205-.211c.695-.719 1.888-.03 1.613.931l-.08.284a.96.96 0 0 0 1.187 1.187l.283-.081c.96-.275 1.65.918.931 1.613l-.211.205a.96.96 0 0 0 .434 1.622l.286.071c.97.243.97 1.62 0 1.864l-.286.071a.96.96 0 0 0-.434 1.622l.211.205c.719.695.03 1.888-.931 1.613l-.284-.08a.96.96 0 0 0-1.187 1.187l.081.283c.275.96-.918 1.65-1.613.931l-.205-.211a.96.96 0 0 0-1.622.434l-.071.286c-.243.97-1.62.97-1.864 0l-.071-.286a.96.96 0 0 0-1.622-.434l-.205.211c-.695.719-1.888.03-1.613-.931l.08-.284a.96.96 0 0 0-1.186-1.187l-.284.081c-.96.275-1.65-.918-.931-1.613l.211-.205a.96.96 0 0 0-.434-1.622l-.286-.071c-.97-.243-.97-1.62 0-1.864l.286-.071a.96.96 0 0 0 .434-1.622l-.211-.205c-.719-.695-.03-1.888.931-1.613l.284.08a.96.96 0 0 0 1.187-1.186l-.081-.284c-.275-.96.918-1.65 1.613-.931l.205.211a.96.96 0 0 0 1.622-.434zM12.973 8.5H8.25l-2.834 3.779A4.998 4.998 0 0 0 12.973 8.5m0-1a4.998 4.998 0 0 0-7.557-3.779l2.834 3.78zM5.048 3.967l-.087.065zm-.431.355A4.98 4.98 0 0 0 3.002 8c0 1.455.622 2.765 1.615 3.678L7.375 8zm.344 7.646.087.065z"/>

                                            <Label Content="Базовые настройки:" FontFamily="{StaticResource Rubik}" Foreground="{DynamicResource GrayLight}" Grid.Column="1"/>
                                        </Grid>
                                        <ComboBox Style="{StaticResource ComboBoxMain}" IsEnabled="{Binding InCustomClassEnabledOnly}" ItemsSource="{Binding AvailableComponents}" SelectedItem="{Binding SelectedComponent, Mode=TwoWay}" ToolTip="Компонент, к которому относится класс">
                                            <ComboBox.ItemTemplate>
                                                <DataTemplate>
                                                    <StackPanel Orientation="Horizontal">
                                                        <Path Height="15" Width="15" Stretch="Uniform" Fill="{Binding Color, Converter={StaticResource IEColorToBrushConverter}}" Data="{Binding Icon, Converter={StaticResource PathDataToGeometryConverter}}"/>
                                                        <Label Margin="5,0,0,0" FontFamily="{StaticResource Rubik}" Foreground="White" Content="{Binding Name}"/>
                                                    </StackPanel>
                                                </DataTemplate>
                                            </ComboBox.ItemTemplate>
                                        </ComboBox>
                                        <TextBox Style="{StaticResource TextBoxMain}" Text="{Binding NameOfClass, UpdateSourceTrigger=PropertyChanged}" IsEnabled="{Binding InCustomClassEnabledOnly}" Tag="Наименование класса" MaxLength="50" ToolTip="Наименование класса (везде)"/>
                                        <TextBox Style="{StaticResource TextBoxMain}" Text="{Binding ListName}" Tag="Наименование списка объектов" MaxLength="75" ToolTip="Наименование списка объектов (во всех вкладках, где показывается список объектов класса)"/>
                                        <TextBox Style="{StaticResource TextBoxBig}" Text="{Binding Description}" Tag="Описание класса" MaxLength="200" ToolTip="Описание класса (функциональность)"/>
                                    </StackPanel>
                                </Border>
                                <Border Style="{StaticResource ToolBorder}">
                                    <StackPanel>
                                        <Grid Margin="5">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="30"/>
                                                <ColumnDefinition/>
                                            </Grid.ColumnDefinitions>
                                            <Path Fill="{DynamicResource Yellow}" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="0" Stretch="Uniform" Height="15" Data="M247.23-127.31q-26.85 3.46-47.96-12.81-21.12-16.26-24.35-43.11l-49.15-388.54q-3.23-26.85 13.31-48.61 16.54-21.77 43.38-24.24l39.08-2.92v281.39q0 59.84 42.38 102.23 42.39 42.38 102.23 42.38h367.39q.15 14-9.77 24.58-9.92 10.58-24.39 12.81l-452.15 56.84Zm118.92-174.23q-27.61 0-46.11-18.5t-18.5-46.11v-409.23q0-27.62 18.5-46.12 18.5-18.5 46.11-18.5h409.23q27.62 0 46.12 18.5Q840-803 840-775.38v409.23q0 27.61-18.5 46.11t-46.12 18.5H366.15Zm188.47-124.84q7.46 4.23 16.15 4.23 8.69 0 16.15-4.23l101.54-57.77q7.46-4.23 11.81-11.81 4.35-7.58 4.35-16.27v-117.08q0-8.69-4.35-16.27-4.35-7.57-11.81-11.8l-101.54-57.77q-7.46-4.23-16.15-4.23-8.69 0-16.15 4.23l-101.54 57.77q-7.46 4.23-11.81 11.8-4.35 7.58-4.35 16.27v117.08q0 8.69 4.35 16.27t11.81 11.81l101.54 57.77Z"/>
                                            <Label Grid.Column="1" Content="Используемые обобщения:" FontFamily="{StaticResource Rubik}" Foreground="{DynamicResource GrayLight}" />
                                        </Grid>
                                        <!--<Button Style="{StaticResource ButtonRectangle}" ToolTip="Добавить новое обобщение" HorizontalAlignment="Left" Grid.Column="2" >
                                            <StackPanel Orientation="Horizontal">
                                                <Path Fill="{StaticResource Buttons.Green}" VerticalAlignment="Center" Stretch="Uniform" Data="M8.004,19.3885V9.6135a1.5425,1.5425,0,0,1,.475-1.141A1.573,1.573,0,0,1,9.6252,8.004h9.7633A1.62,1.62,0,0,1,21.004,9.62v6.29a1.5674,1.5674,0,0,1-.1308.6323,1.6576,1.6576,0,0,1-.348.5177L17.06,20.5252a1.6576,1.6576,0,0,1-.5177.348,1.5674,1.5674,0,0,1-.6323.1308H9.62A1.62,1.62,0,0,1,8.004,19.3885ZM3.029,6.6a1.5057,1.5057,0,0,1,.2567-1.2127,1.6084,1.6084,0,0,1,1.06-.6643L13.9655,3.029a1.5057,1.5057,0,0,1,1.2127.2567,1.61,1.61,0,0,1,.6643,1.06L16.054,5.62H9.62a4.0118,4.0118,0,0,0-4,4V17.4a1.6446,1.6446,0,0,1-.5818-.475,1.62,1.62,0,0,1-.3145-.7057ZM14.004,15.004v2.5a.5.5,0,1,0,1,0v-2.5h2.5a.5.5,0,1,0,0-1h-2.5v-2.5a.5.5,0,1,0-1,0v2.5h-2.5a.5.5,0,1,0,0,1Z"/>
                                                <Label Content="Имплементировать обобщение" Foreground="White"/>
                                            </StackPanel>
                                        </Button>-->
                                        <ListBox Style="{StaticResource ListBoxMain}" MinHeight="35" ItemsSource="{Binding IncludedGeneralizators}" >
                                            <ListBox.ItemTemplate>
                                                <DataTemplate>
                                                    <StackPanel Orientation="Horizontal">
                                                        <Path Fill="{StaticResource Buttons.Green}" Margin="0,0,10,0" Stretch="Uniform" Height="15" Width="15" Data="m586.92-427.15 101.54-57q7.46-4.23 11.81-12.2 4.35-7.96 4.35-16.65v-115.54q0-8.69-4.35-16.65-4.35-7.96-11.81-12.19l-101.54-57q-7.46-4.24-16.15-4.24-8.69 0-16.15 4.24l-101.54 57q-7.46 4.23-11.81 12.19-4.35 7.96-4.35 16.65V-513q0 8.69 4.35 16.65 4.35 7.97 11.81 12.2l101.54 57q7.46 4.23 16.15 4.23 8.69 0 16.15-4.23ZM366.15-301.54q-27.61 0-46.11-18.5t-18.5-46.11v-409.23q0-27.62 18.5-46.12 18.5-18.5 46.11-18.5h409.23q27.62 0 46.12 18.5Q840-803 840-775.38v409.23q0 27.61-18.5 46.11t-46.12 18.5H366.15Zm0-40h409.23q10.77 0 17.7-6.92 6.92-6.92 6.92-17.69v-409.23q0-10.77-6.92-17.7-6.93-6.92-17.7-6.92H366.15q-10.77 0-17.69 6.92-6.92 6.93-6.92 17.7v409.23q0 10.77 6.92 17.69 6.92 6.92 17.69 6.92Zm204.62-229.23ZM218-164Zm29.23 36.69q-26.85 3.23-47.96-12.92-21.12-16.15-24.35-43l-49.15-388.54q-3.23-26.85 13.54-48.61 16.77-21.77 43.61-24.47l17.39-.77q8.54-.69 15.11 4.77 6.58 5.47 6.58 15 0 7.31-5.12 13.31-5.11 6-12.42 6.69l-15.61.77q-10.77.77-16.93 8.85-6.15 8.08-4.61 18.85l47.84 388.76q1.54 10.77 9.23 16.93 7.7 6.15 18.47 4.61l470.92-58.77q8.54-1.23 15 3.77 6.46 5 7.69 13.54 1.23 8.54-3.77 14.5-5 5.96-13.54 7.19l-471.92 59.54Zm323.54-336.23-93.85-53.23v-108L570.77-678l93.85 53.23v108l-93.85 53.23Z"/>
                                                        <TextBlock Text="{Binding Name}" TextElement.FontWeight="Bold"/>
                                                    </StackPanel>
                                                </DataTemplate>
                                            </ListBox.ItemTemplate>
                                        </ListBox>
                                    </StackPanel>

                                </Border>
                                <!--TemplateName and Card-->
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition/>
                                        <ColumnDefinition/>
                                    </Grid.ColumnDefinitions>
                                    <Border Style="{StaticResource ToolBorder}">
                                        <StackPanel>
                                            <Grid Margin="5,5,0,0">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="30"/>
                                                    <ColumnDefinition/>
                                                </Grid.ColumnDefinitions>
                                                <Path Fill="{DynamicResource Yellow}" Data="m3.266 12.496.96-2.853H7.76l.96 2.853H10L6.62 3H5.38L2 12.496zm2.748-8.063 1.419 4.23h-2.88l1.426-4.23zm6.132 7.203v-.075c0-.332.234-.618.619-.618.354 0 .618.256.618.58 0 .362-.271.649-.52.898l-1.788 1.832V15h3.59v-.958h-1.923v-.045l.973-1.04c.415-.438.867-.845.867-1.547 0-.8-.701-1.41-1.787-1.41-1.23 0-1.795.8-1.795 1.576v.06z" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="0,0,2,0"/>

                                                <Label Content="Наименование объектов:" FontFamily="{StaticResource Rubik}" Foreground="{DynamicResource GrayLight}" Grid.Column="1"/>
                                            </Grid>
                                            <TextBox x:Name="NameTemplate" Style="{StaticResource TextBoxMain}" Text="{Binding NameTemplate}" Tag="Шаблон названия" MaxLength="75">
                                                <TextBox.ContextMenu>
                                                    <ContextMenu>
                                                        <MenuItem Header="Копировать" Command="ApplicationCommands.Copy"/>
                                                        <MenuItem Header="Вставить" Command="ApplicationCommands.Paste"/>
                                                        <Separator Background="{DynamicResource LightBlack}"/>
                                                        <MenuItem Header="Вставить имя поля" Click="InsertFieldNameClick"/>
                                                    </ContextMenu>
                                                </TextBox.ContextMenu>
                                            </TextBox>
                                        </StackPanel>
                                    </Border>
                                    <Border x:Name="CardArea" Style="{StaticResource ToolBorder}" Grid.Column="1">
                                        <StackPanel>
                                            <Grid Margin="5,5,0,0">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="30"/>
                                                    <ColumnDefinition/>
                                                </Grid.ColumnDefinitions>
                                                <Path Fill="{DynamicResource Yellow}" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="0,0,2,0" Data="M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2zm9 1.5a.5.5 0 0 0 .5.5h4a.5.5 0 0 0 0-1h-4a.5.5 0 0 0-.5.5M9 8a.5.5 0 0 0 .5.5h4a.5.5 0 0 0 0-1h-4A.5.5 0 0 0 9 8m1 2.5a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 0-1h-3a.5.5 0 0 0-.5.5m-1 2C9 10.567 7.21 9 5 9c-2.086 0-3.8 1.398-3.984 3.181A1 1 0 0 0 2 13h6.96q.04-.245.04-.5M7 6a2 2 0 1 0-4 0 2 2 0 0 0 4 0"/>

                                                <Label Content="Карточка объекта:" FontFamily="{StaticResource Rubik}" Foreground="{DynamicResource GrayLight}" Grid.Column="1"/>
                                            </Grid>
                                            <CheckBox Style="{StaticResource CheckBoxMain}" Content="Показывать карточку объекта" IsChecked="{Binding ShowCard}"/>
                                        </StackPanel>
                                    </Border>

                                </Grid>

                                <Border x:Name="AccessArea" Style="{StaticResource ToolBorder}">
                                    <StackPanel>
                                        <Grid Margin="5,5,0,0">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="30"/>
                                                <ColumnDefinition/>
                                            </Grid.ColumnDefinitions>
                                            <Path Fill="{DynamicResource Yellow}" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="0,0,2,0" Data="M11 5a3 3 0 1 1-6 0 3 3 0 0 1 6 0m-9 8c0 1 1 1 1 1h5v-1a2 2 0 0 1 .01-.2 4.49 4.49 0 0 1 1.534-3.693Q8.844 9.002 8 9c-5 0-6 3-6 4m7 0a1 1 0 0 1 1-1v-1a2 2 0 1 1 4 0v1a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1zm3-3a1 1 0 0 0-1 1v1h2v-1a1 1 0 0 0-1-1"/>

                                            <Label Content="Редактирование:" FontFamily="{StaticResource Rubik}" Foreground="{DynamicResource GrayLight}" Grid.Column="1"/>

                                        </Grid>
                                        <CheckBox Style="{StaticResource CheckBoxMain}" Content="Редактирование объекта доступно только автору" IsChecked="{Binding EditByAuthorOnly}"/>
                                        <CheckBox Style="{StaticResource CheckBoxMain}" Content="Разрешить переопределение автора и делегирование" IsChecked="{Binding AuthorOverrideEnabled}"/>
                                    </StackPanel>
                                </Border>
                                <Border Style="{StaticResource ToolBorder}" Grid.Column="1">
                                    <StackPanel>
                                        <Grid Margin="5,5,0,0">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="30"/>
                                                <ColumnDefinition/>
                                            </Grid.ColumnDefinitions>
                                            <Path Fill="{DynamicResource Yellow}" HorizontalAlignment="Center" VerticalAlignment="Center" Stretch="Uniform" Height="15" Margin="0,0,2,0" Data="M600-160q-27.62 0-46.12-18.5-18.5-18.5-18.5-46.12v-510.76q0-27.62 18.5-46.12Q572.38-800 600-800h110.77q27.61 0 46.12 18.5 18.5 18.5 18.5 46.12v510.76q0 27.62-18.5 46.12-18.51 18.5-46.12 18.5H600Zm-350.77 0q-27.61 0-46.11-18.5-18.51-18.5-18.51-46.12v-510.76q0-27.62 18.51-46.12 18.5-18.5 46.11-18.5H360q27.62 0 46.12 18.5 18.5 18.5 18.5 46.12v510.76q0 27.62-18.5 46.12Q387.62-160 360-160H249.23Zm-24.61-575.38v510.76q0 9.24 7.69 16.93Q240-200 249.23-200H360q9.23 0 16.92-7.69 7.7-7.69 7.7-16.93v-510.76q0-9.24-7.7-16.93Q369.23-760 360-760H249.23q-9.23 0-16.92 7.69-7.69 7.69-7.69 16.93Z"/>

                                            <Label Content="Список объектов:" FontFamily="{StaticResource Rubik}" Foreground="{DynamicResource GrayLight}" Grid.Column="1"/>

                                        </Grid>
                                        <CheckBox x:Name="ButtonPresetsEnabled" Style="{StaticResource CheckBoxMain}" Content="Ограничить просмотр общего списка" IsChecked="{Binding PresetsEnabled}"/>
                                        <ListBox Style="{StaticResource ListBoxMain}" MinHeight="40" ItemContainerStyle="{StaticResource ListBoxItemUnselectable}" ItemsSource="{Binding MapFieldsList}" MaxHeight="200">
                                            <ListBox.ItemTemplate>
                                                <DataTemplate>
                                                    <CheckBox Style="{StaticResource CheckBoxMain}" MinHeight="15" Margin="2" Content="{Binding Name}" IsEnabled="{Binding BelongsThisClass}" IsChecked="{Binding ListVisibility}"/>
                                                </DataTemplate>
                                            </ListBox.ItemTemplate>
                                        </ListBox>
                                    </StackPanel>
                                </Border>
                                <Border Style="{StaticResource ToolBorder}" Grid.Column="1">
                                    <StackPanel>
                                        <Grid Margin="5,5,0,0">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition MaxWidth="30"/>
                                                <ColumnDefinition/>
                                            </Grid.ColumnDefinitions>
                                            <Path Fill="{DynamicResource Yellow}" HorizontalAlignment="Center" VerticalAlignment="Center" Stretch="Uniform" Height="15" Margin="0,0,2,0" Data="M520-620v60q0 8.5 5.76 14.25t14.27 5.75q8.51 0 14.24-5.75T560-560v-60h60q8.5 0 14.25-5.76t5.75-14.27q0-8.51-5.75-14.24T620-660h-60v-60q0-8.5-5.76-14.25T539.97-740q-8.51 0-14.24 5.75T520-720v60h-60q-8.5 0-14.25 5.76T440-639.97q0 8.51 5.75 14.24T460-620h60Zm-60 240h160q8.5 0 14.25-5.76t5.75-14.27q0-8.51-5.75-14.24T620-420H460q-8.5 0-14.25 5.76T440-399.97q0 8.51 5.75 14.24T460-380ZM344.62-240q-27.62 0-46.12-18.5Q280-277 280-304.62v-510.76q0-27.62 18.5-46.12Q317-880 344.62-880h248.53q13.27 0 25.29 5.23t20.71 13.92l141.7 141.7q8.69 8.69 13.92 20.71 5.23 12.02 5.23 25.29v368.53q0 27.62-18.5 46.12Q763-240 735.38-240H344.62Zm-160 160Q157-80 138.5-98.5 120-117 120-144.62V-620q0-8.5 5.76-14.25t14.27-5.75q8.51 0 14.24 5.75T160-620v475.38q0 9.24 7.69 16.93 7.69 7.69 16.93 7.69H540q8.5 0 14.25 5.76T560-99.97q0 8.51-5.75 14.24T540-80H184.62Z"/>

                                            <Label Content="Контроль уникальности:" FontFamily="{StaticResource Rubik}" Foreground="{DynamicResource GrayLight}" Grid.Column="1"/>

                                        </Grid>
                                        <ListBox Style="{StaticResource ListBoxMain}" MinHeight="40" ItemContainerStyle="{StaticResource ListBoxItemUnselectable}" ItemsSource="{Binding MapFieldsList}" MaxHeight="200">
                                            <ListBox.ItemTemplate>
                                                <DataTemplate>
                                                    <CheckBox Style="{StaticResource CheckBoxMain}" MinHeight="15" Margin="2" Content="{Binding Name}" IsEnabled="{Binding BelongsThisClass}" IsChecked="{Binding IsUnique}"/>
                                                </DataTemplate>
                                            </ListBox.ItemTemplate>
                                        </ListBox>
                                    </StackPanel>
                                </Border>
                            </StackPanel>
                        </ScrollViewer>
                    </Border>
                    <TabControl Style="{StaticResource TabControlMain}" ItemContainerStyle="{StaticResource TabItemMain}" Grid.Column="1" Background="{x:Null}">
                        <TabItem Header="Поля" BorderBrush="{DynamicResource DarkYellow}">
                            <Grid IsEnabled="{Binding IsEditingEnabled}">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="1*" MinWidth="250" />
                                    <ColumnDefinition Width="50"/>
                                </Grid.ColumnDefinitions>
                                <ListBox Style="{StaticResource ListBoxMain}" ItemsSource="{Binding Fields}" ItemContainerStyle="{StaticResource ListBoxItemUnvisibleBorders}" ScrollViewer.HorizontalScrollBarVisibility="Disabled" VirtualizingPanel.ScrollUnit="Pixel" Margin="0,5,5,5" Background="{StaticResource Black}">
                                    <ListBox.ItemTemplate>
                                        <DataTemplate>
                                            <Border x:Name="MainBorder" Margin="2" CornerRadius="2" Background="{DynamicResource Dark}">
                                                <Border.Style>
                                                    <Style TargetType="{x:Type Border}">
                                                        <Setter Property="Height" Value="Auto"/>
                                                        <Style.Triggers>
                                                            <DataTrigger Binding="{Binding ElementName=ExpanderButton, Path=IsChecked}" Value="False">
                                                                <Setter Property="Height" Value="40"/>
                                                            </DataTrigger>
                                                        </Style.Triggers>
                                                    </Style>
                                                </Border.Style>
                                                <Grid>
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="55*"/>
                                                        <ColumnDefinition Width="40" MaxWidth="40"/>
                                                    </Grid.ColumnDefinitions>
                                                    <Grid.RowDefinitions>
                                                        <RowDefinition Height="40"/>
                                                        <RowDefinition Height="2"/>
                                                        <RowDefinition />
                                                    </Grid.RowDefinitions>
                                                    <StackPanel Orientation="Horizontal" Grid.Row="0" Grid.ColumnSpan="2">
                                                        <CheckBox x:Name="ExpanderButton" Style="{StaticResource ExpanderButton}" IsChecked="{Binding IsExpanded}" ToolTip="Свернуть / развернуть поле"/>
                                                        <Rectangle Width="1" Fill="{DynamicResource Area}" Margin="0,5,0,5" Opacity="0.5" />
                                                        <Label Style="{DynamicResource LabelElement}" Content="[" VerticalAlignment="Center" HorizontalAlignment="Left" Foreground="{DynamicResource DarkLight}"/>
                                                        <TextBox Style="{DynamicResource TextBoxTransparent}" IsEnabled="{Binding EditingEnabled}" Text="{Binding Name, UpdateSourceTrigger=PropertyChanged}" MaxLength="30">
                                                            <TextBox.ContextMenu>
                                                                <ContextMenu>
                                                                    <MenuItem Header="Копировать" Command="ApplicationCommands.Copy"/>
                                                                    <MenuItem Header="Вставить" Command="ApplicationCommands.Paste"/>
                                                                </ContextMenu>
                                                            </TextBox.ContextMenu>
                                                        </TextBox>
                                                        <Label Style="{DynamicResource LabelElement}" Content="]" VerticalAlignment="Center" HorizontalAlignment="Left" Foreground="{DynamicResource DarkLight}"/>
                                                    </StackPanel>

                                                    <Rectangle Grid.Row="1" Fill="{DynamicResource Area}" Grid.ColumnSpan="2" />

                                                    <StackPanel Grid.Row="2" x:Name="ContentPanel" IsEnabled="{Binding EditingEnabled}">

                                                        <TextBox Style="{DynamicResource TextBoxMain}" IsReadOnly="False" Tag="Отображаемое название" Text="{Binding VisibleName, UpdateSourceTrigger=PropertyChanged}" MaxLength="50" TextWrapping="Wrap">
                                                            <TextBox.ContextMenu>
                                                                <ContextMenu>
                                                                    <MenuItem Header="Копировать" Command="ApplicationCommands.Copy"/>
                                                                    <MenuItem Header="Вставить" Command="ApplicationCommands.Paste"/>
                                                                </ContextMenu>
                                                            </TextBox.ContextMenu>
                                                        </TextBox>
                                                        <Grid>
                                                            <Grid.ColumnDefinitions>
                                                                <ColumnDefinition Width="40"/>
                                                                <ColumnDefinition />
                                                            </Grid.ColumnDefinitions>
                                                            <ComboBox x:Name="ComboType" Style="{DynamicResource ComboBoxMain}" MaxDropDownHeight="600" ItemsSource="{Binding DataContext.FieldTypes, RelativeSource={RelativeSource AncestorType=ListBox}}" SelectedItem="{Binding Type, Delay=10}" SelectionChanged="ComboType_SelectionChanged" Grid.Column="1">
                                                                <ComboBox.ItemTemplate>
                                                                    <DataTemplate>
                                                                        <StackPanel Orientation="Horizontal">
                                                                            <Path Width="15" Stretch="Uniform" Fill="{Binding ., Converter={StaticResource FieldTypeToColorConverter}}" Data="{Binding ., Converter={StaticResource FieldTypeToIconConverter}}"/>
                                                                            <Label Margin="5,0,0,0" Content="{Binding ., Converter={StaticResource FieldTypeToVisibleNameConverter}}" Style="{DynamicResource LabelElement}" FontSize="11"/>
                                                                            <!--<Label Content="{Binding ., Converter={StaticResource FieldTypeToVisibleNameConverter}}" Style="{DynamicResource LabelElement}" Foreground="{DynamicResource Icon}" FontSize="10"/>-->
                                                                        </StackPanel>
                                                                    </DataTemplate>
                                                                </ComboBox.ItemTemplate>
                                                            </ComboBox>
                                                            <Button Style="{StaticResource ButtonSquare}" Background="{StaticResource Dark}" ToolTip="Открыть настройки поля" Command="{Binding OpenFieldSettings}" CommandParameter="{Binding }">
                                                                <Path Fill="White" VerticalAlignment="Center" Data="M7.068.727c.243-.97 1.62-.97 1.864 0l.071.286a.96.96 0 0 0 1.622.434l.205-.211c.695-.719 1.888-.03 1.613.931l-.08.284a.96.96 0 0 0 1.187 1.187l.283-.081c.96-.275 1.65.918.931 1.613l-.211.205a.96.96 0 0 0 .434 1.622l.286.071c.97.243.97 1.62 0 1.864l-.286.071a.96.96 0 0 0-.434 1.622l.211.205c.719.695.03 1.888-.931 1.613l-.284-.08a.96.96 0 0 0-1.187 1.187l.081.283c.275.96-.918 1.65-1.613.931l-.205-.211a.96.96 0 0 0-1.622.434l-.071.286c-.243.97-1.62.97-1.864 0l-.071-.286a.96.96 0 0 0-1.622-.434l-.205.211c-.695.719-1.888.03-1.613-.931l.08-.284a.96.96 0 0 0-1.186-1.187l-.284.081c-.96.275-1.65-.918-.931-1.613l.211-.205a.96.96 0 0 0-.434-1.622l-.286-.071c-.97-.243-.97-1.62 0-1.864l.286-.071a.96.96 0 0 0 .434-1.622l-.211-.205c-.719-.695-.03-1.888.931-1.613l.284.08a.96.96 0 0 0 1.187-1.186l-.081-.284c-.275-.96.918-1.65 1.613-.931l.205.211a.96.96 0 0 0 1.622-.434zM12.973 8.5H8.25l-2.834 3.779A4.998 4.998 0 0 0 12.973 8.5m0-1a4.998 4.998 0 0 0-7.557-3.779l2.834 3.78zM5.048 3.967l-.087.065zm-.431.355A4.98 4.98 0 0 0 3.002 8c0 1.455.622 2.765 1.615 3.678L7.375 8zm.344 7.646.087.065z"/>
                                                            </Button>
                                                        </Grid>
                                                    </StackPanel>
                                                    <Rectangle Width="1" Fill="{DynamicResource Area}" Grid.Column="1" Visibility="{Binding BelongsVisibility}" HorizontalAlignment="Left" Margin="-2,5,0,5" Opacity="0.5" />
                                                    <Button x:Name="RemoveButton" Style="{StaticResource ButtonSquare}" Visibility="{Binding BelongsVisibility}" IsEnabled="{Binding EditingEnabled}" Background="{StaticResource Dark}" ToolTip="Удалить поле" Grid.Column="1" Command="{Binding RemoveField}" CommandParameter="{Binding }">
                                                        <Path Fill="#FFFF7878" VerticalAlignment="Center" Stretch="Uniform" Margin="2" Data="M9.1182,16.61,12.6875,13.04,16.2568,16.61l.6462-.6462L13.3337,12.394,16.903,8.8248l-.6462-.6463-3.5693,3.5693L9.1182,8.1785l-.6462.6463,3.5692,3.5692L8.472,15.9633ZM12.692,21.24a8.6206,8.6206,0,0,1-3.4515-.6973,8.8354,8.8354,0,0,1-4.704-4.6995,8.8864,8.8864,0,0,1,.002-6.8965,8.8363,8.8363,0,0,1,4.7-4.704,8.8876,8.8876,0,0,1,6.8965.002,8.8363,8.8363,0,0,1,4.704,4.7,8.8864,8.8864,0,0,1-.002,6.8965,8.8354,8.8354,0,0,1-4.6995,4.704A8.6053,8.6053,0,0,1,12.692,21.24Zm-.0053-.9233A7.6448,7.6448,0,0,0,18.3025,18.01a7.6411,7.6411,0,0,0,2.308-5.6147A7.6453,7.6453,0,0,0,18.303,6.779a7.6416,7.6416,0,0,0-5.6148-2.308A7.645,7.645,0,0,0,7.0725,6.7785a7.6414,7.6414,0,0,0-2.308,5.6148A7.645,7.645,0,0,0,7.072,18.009,7.6411,7.6411,0,0,0,12.6867,20.317Z"/>
                                                    </Button>
                                                    <StackPanel Grid.Row="2" Grid.Column="1" VerticalAlignment="Center" Visibility="{Binding BelongsVisibility}">
                                                        <Button Style="{StaticResource ButtonSquare}" Background="{StaticResource Dark}"  ToolTip="Поднять выше" Grid.Column="1" Command="{Binding MoveUpField}" CommandParameter="{Binding }">
                                                            <Path Fill="DodgerBlue" VerticalAlignment="Center" Stretch="Uniform" Margin="4" Data="M13.04,11.1856l-4.2463,4.246a.5021.5021,0,0,1-.3442.15.4664.4664,0,0,1-.3633-.15.4716.4716,0,0,1,0-.7075l4.3883-4.3885a.7813.7813,0,0,1,1.131,0l4.3882,4.3885a.5024.5024,0,0,1,.15.3443.4662.4662,0,0,1-.15.3632.4714.4714,0,0,1-.7075,0Z"/>
                                                        </Button>
                                                        <Button Style="{StaticResource ButtonSquare}" Background="{StaticResource Dark}"  ToolTip="Опустить ниже" Grid.Column="1" Command="{Binding MoveDownField}" CommandParameter="{Binding }">
                                                            <Path Fill="DodgerBlue" VerticalAlignment="Center" Stretch="Uniform" Margin="4" Data="M -13.04 -11.1856 l 4.2463 -4.246 a 0.5021 0.5021 180 0 1 0.3442 -0.15 a 0.4664 0.4664 180 0 1 0.3633 0.15 a 0.4716 0.4716 180 0 1 0 0.7075 l -4.3883 4.3885 a 0.7813 0.7813 180 0 1 -1.131 0 l -4.3882 -4.3885 a 0.5024 0.5024 180 0 1 -0.15 -0.3443 a 0.4662 0.4662 180 0 1 0.15 -0.3632 a 0.4714 0.4714 180 0 1 0.7075 -0 Z"/>
                                                        </Button>
                                                    </StackPanel>
                                                </Grid>
                                            </Border>
                                        </DataTemplate>
                                    </ListBox.ItemTemplate>
                                </ListBox>
                                <Border Grid.Row="2" Grid.Column="3" VerticalAlignment="Top">
                                    <StackPanel Orientation="Vertical" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="0,5,0,0" Cursor="" >
                                        <Button Style="{StaticResource ButtonSquare}" Background="{StaticResource Black}" Click="AddFieldClick" ToolTip="Добавить поле">
                                            <Path Fill="{StaticResource Buttons.Green}" Data="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M8.5 4.5a.5.5 0 0 0-1 0v3h-3a.5.5 0 0 0 0 1h3v3a.5.5 0 0 0 1 0v-3h3a.5.5 0 0 0 0-1h-3z" VerticalAlignment="Center"/>
                                        </Button>
                                        <Button Style="{StaticResource ButtonSquare}" Background="{StaticResource Black}" Click="AddFieldsFromStringSourceClick" ToolTip="Добавить поля из строки">
                                            <Path Fill="{StaticResource Buttons.Green}" Stretch="Uniform" Height="14" VerticalAlignment="Center" Data="M160-330q-12.75 0-21.37-8.63-8.63-8.63-8.63-21.38 0-12.76 8.63-21.37Q147.25-390 160-390h220q12.75 0 21.38 8.63 8.62 8.63 8.62 21.38 0 12.76-8.62 21.37Q392.75-330 380-330H160Zm0-160q-12.75 0-21.37-8.63-8.63-8.63-8.63-21.38 0-12.76 8.63-21.37Q147.25-550 160-550h380q12.75 0 21.38 8.63 8.62 8.63 8.62 21.38 0 12.76-8.62 21.37Q552.75-490 540-490H160Zm0-160q-12.75 0-21.37-8.63-8.63-8.63-8.63-21.38 0-12.76 8.63-21.37Q147.25-710 160-710h380q12.75 0 21.38 8.63 8.62 8.63 8.62 21.38 0 12.76-8.62 21.37Q552.75-650 540-650H160Zm519.99 480q-12.76 0-21.37-8.63Q650-187.25 650-200v-130H520q-12.75 0-21.37-8.63-8.63-8.63-8.63-21.38 0-12.76 8.63-21.37Q507.25-390 520-390h130v-130q0-12.75 8.63-21.37 8.63-8.63 21.38-8.63 12.76 0 21.37 8.63Q710-532.75 710-520v130h130q12.75 0 21.37 8.63 8.63 8.63 8.63 21.38 0 12.76-8.63 21.37Q852.75-330 840-330H710v130q0 12.75-8.63 21.37-8.63 8.63-21.38 8.63Z"/>
                                        </Button>
                                        <Button Style="{StaticResource ButtonSquare}" Background="{StaticResource Black}" Click="CopyFieldsFromAnotherClass" ToolTip="Скопировать поля из другого класса">
                                            <Path Fill="{StaticResource Buttons.Green}" VerticalAlignment="Center" Data="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5z M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5zm4.5 6V9H10a.5.5 0 0 1 0 1H8.5v1.5a.5.5 0 0 1-1 0V10H6a.5.5 0 0 1 0-1h1.5V7.5a.5.5 0 0 1 1 0"/>
                                        </Button>

                                        <Rectangle Height="1" Fill="{DynamicResource LightBlack}" Margin="4,2,4,2"/>

                                        <Button Style="{StaticResource ButtonSquare}" Background="{StaticResource Black}" Click="MinimizeAllClick" ToolTip="Свернуть все поля">
                                            <Path Fill="DodgerBlue" VerticalAlignment="Center" Stretch="Uniform" Data="M7.5519,19.8462V16.4385H4.1441v-.923H8.4749v4.3307Zm7.9855,0V15.5155h4.3185v.923H16.4606v3.4077ZM4.1441,8.472V7.549H7.5519V4.1538h.923V8.472Zm11.3933,0V4.1538h.9232V7.549h3.3953v.923Z"/>
                                        </Button>
                                        <Button Style="{StaticResource ButtonSquare}" Background="{StaticResource Black}" Click="MaximizeAllClick" ToolTip="Развернуть все поля">
                                            <Path Fill="DodgerBlue" VerticalAlignment="Center" Stretch="Uniform" Data="M4.1441,19.8462V15.5155h.9233V18.923H8.4749v.9232Zm11.3933,0V18.923h3.3952V15.5155h.9233v4.3307ZM4.1441,8.472V4.1538H8.4749V5.077H5.0674V8.472Zm14.7885,0V5.077H15.5374V4.1538h4.3185V8.472Z"/>
                                        </Button>

                                        <Rectangle Height="1" Fill="{DynamicResource LightBlack}" Margin="4,2,4,2"/>

                                        <Button Style="{StaticResource ButtonSquare}" Background="{StaticResource Black}" Click="GetMoreInfoClick" ToolTip="Открыть справочную информацию">
                                            <Path Fill="#FF78DDFF" VerticalAlignment="Center" Stretch="Uniform" Data="M12.9356,17.9427a.78.78,0,1,0-.5605-.2277A.7589.7589,0,0,0,12.9356,17.9427Zm-.5165-3.3115h.9655a2.7092,2.7092,0,0,1,.245-1.06,4.5017,4.5017,0,0,1,.851-1.04,6.9246,6.9246,0,0,0,.9963-1.199,2.2871,2.2871,0,0,0,.327-1.2265,2.3407,2.3407,0,0,0-.8308-1.8842A2.9485,2.9485,0,0,0,13.0076,7.52a2.89,2.89,0,0,0-1.8317.5865,3.6369,3.6369,0,0,0-1.1028,1.348l.919.3808A2.9346,2.9346,0,0,1,11.68,8.87a1.8167,1.8167,0,0,1,1.2895-.4192A1.7552,1.7552,0,0,1,14.39,8.984a1.7859,1.7859,0,0,1,.448,1.1742,1.5992,1.5992,0,0,1-.2808.9278,4.909,4.909,0,0,1-.7307.8222,5.0884,5.0884,0,0,0-1.1385,1.3595A3.1182,3.1182,0,0,0,12.4191,14.6312Zm.4918,7.0808a8.7726,8.7726,0,0,1-3.51-.7085A8.9859,8.9859,0,0,1,4.6169,16.224a9.0416,9.0416,0,0,1-.0008-7.019,8.9865,8.9865,0,0,1,4.78-4.7838,9.0422,9.0422,0,0,1,7.019-.0007A8.9865,8.9865,0,0,1,21.1984,9.2a9.0422,9.0422,0,0,1,.0007,7.019,8.9859,8.9859,0,0,1-4.78,4.7837A8.7525,8.7525,0,0,1,12.9109,21.712Zm-.0033-1a7.7211,7.7211,0,0,0,5.675-2.325,7.7211,7.7211,0,0,0,2.325-5.675,7.7209,7.7209,0,0,0-2.325-5.675,7.7211,7.7211,0,0,0-5.675-2.325,7.7211,7.7211,0,0,0-5.675,2.325,7.7209,7.7209,0,0,0-2.325,5.675,7.7211,7.7211,0,0,0,2.325,5.675A7.7211,7.7211,0,0,0,12.9076,20.712Z"/>
                                        </Button>
                                    </StackPanel>
                                </Border>
                            </Grid>
                        </TabItem>
                        <TabItem Header="Таблицы" BorderBrush="{DynamicResource DarkYellow}">
                            <Grid IsEnabled="{Binding IsEditingEnabled}">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="1*" MinWidth="250" />
                                    <ColumnDefinition Width="50"/>
                                </Grid.ColumnDefinitions>
                                <ListBox Style="{StaticResource ListBoxMain}" ItemsSource="{Binding Tables}" ItemContainerStyle="{StaticResource ListBoxItemUnvisibleBorders}" ScrollViewer.HorizontalScrollBarVisibility="Disabled" VirtualizingPanel.ScrollUnit="Pixel" Margin="0,5,5,5" Background="{StaticResource Black}">
                                    <ListBox.ItemTemplate>
                                        <DataTemplate>
                                            <Border x:Name="MainBorder" Margin="2" Height="40" CornerRadius="2" Background="{DynamicResource Dark}">
                                                <Grid>
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="55*"/>
                                                        <ColumnDefinition Width="40" MaxWidth="40"/>
                                                    </Grid.ColumnDefinitions>
                                                    <StackPanel Orientation="Horizontal" Grid.Row="0" Grid.ColumnSpan="2">
                                                        <Button Style="{StaticResource ButtonSquare}" Background="{StaticResource Dark}" ToolTip="Открыть вкладку таблицы" Command="{Binding OpenTableSettings}" CommandParameter="{Binding }">
                                                            <Path Fill="White" VerticalAlignment="Center" Stretch="Uniform" Width="14" Data="M200-423.85h260v-185.38H200v185.38Zm0-225.38h560v-86.15q0-10.77-6.92-17.7-6.93-6.92-17.7-6.92H224.62q-10.77 0-17.7 6.92-6.92 6.93-6.92 17.7v86.15ZM561.54-120q-13.92 0-23.12-9.19-9.19-9.19-9.19-23.12v-29.23q0-12.92 5.35-25.11 5.34-12.2 14.04-20.89l193.92-193.15q5.92-5.93 12.31-8 6.38-2.08 12.77-2.08 6.61 0 13.38 2.58 6.77 2.57 11.92 7.73l37 37.77q4.93 5.92 7.5 12.31Q840-364 840-357.62q0 6.39-2.46 12.89-2.46 6.5-7.62 12.42L636.77-139.15q-8.69 8.69-20.89 13.92-12.19 5.23-25.11 5.23h-29.23Zm243.08-237.62-37-37.76 37 37.76ZM224.62-160q-27.62 0-46.12-18.5Q160-197 160-224.62v-510.76q0-27.62 18.5-46.12Q197-800 224.62-800h510.76q27.62 0 46.12 18.5Q800-763 800-735.38v221.61q0 8.54-5.73 14.27T780-493.77q-8.54 0-14.27-5.73T760-513.77v-95.46H500v185.38h108.31q10.92 0 15.15 10.08T620-396L487.85-264.62q-7.7 7.7-17.77 3.47Q460-265.38 460-276.31v-107.54H200v159.23q0 10.77 6.92 17.7 6.93 6.92 17.7 6.92H440q8.54 0 14.27 5.73T460-180q0 8.54-5.73 14.27T440-160H224.62ZM200-200v-183.85V-200Zm300-223.85v-185.38 185.38Zm64.62 268.47h38l138.69-138.93-37-38.54-139.69 139.47v38Zm157.92-157.93-18.23-19.54 37 38.54-18.77-19Z"/>
                                                        </Button>
                                                        <Rectangle Width="1" Fill="{DynamicResource Area}" Margin="0,5,0,5" Opacity="0.5" />
                                                        <Label Style="{DynamicResource LabelElement}" Content="[" VerticalAlignment="Center" HorizontalAlignment="Left" Foreground="{DynamicResource DarkLight}"/>
                                                        <TextBox Style="{DynamicResource TextBoxTransparent}" IsEnabled="{Binding EditingEnabled}" Text="{Binding Name, UpdateSourceTrigger=PropertyChanged}" MaxLength="30">
                                                            <TextBox.ContextMenu>
                                                                <ContextMenu>
                                                                    <MenuItem Header="Копировать" Command="ApplicationCommands.Copy"/>
                                                                    <MenuItem Header="Вставить" Command="ApplicationCommands.Paste"/>
                                                                </ContextMenu>
                                                            </TextBox.ContextMenu>
                                                        </TextBox>
                                                        <Label Style="{DynamicResource LabelElement}" Content="]" VerticalAlignment="Center" HorizontalAlignment="Left" Foreground="{DynamicResource DarkLight}"/>
                                                    </StackPanel>
                                                    <Rectangle Width="1" Fill="{DynamicResource Area}" Grid.Column="1" Visibility="{Binding BelongsVisibility}" HorizontalAlignment="Left" Margin="-2,5,0,5" Opacity="0.5" />
                                                    <Button x:Name="RemoveButton" Style="{StaticResource ButtonSquare}" Visibility="{Binding BelongsVisibility}" Background="{StaticResource Dark}" IsEnabled="{Binding EditingEnabled}" ToolTip="Удалить таблицу" Grid.Column="1" Command="{Binding RemoveTable}" CommandParameter="{Binding }">
                                                        <Path Fill="#FFFF7878" VerticalAlignment="Center" Stretch="Uniform" Margin="2" Data="M9.1182,16.61,12.6875,13.04,16.2568,16.61l.6462-.6462L13.3337,12.394,16.903,8.8248l-.6462-.6463-3.5693,3.5693L9.1182,8.1785l-.6462.6463,3.5692,3.5692L8.472,15.9633ZM12.692,21.24a8.6206,8.6206,0,0,1-3.4515-.6973,8.8354,8.8354,0,0,1-4.704-4.6995,8.8864,8.8864,0,0,1,.002-6.8965,8.8363,8.8363,0,0,1,4.7-4.704,8.8876,8.8876,0,0,1,6.8965.002,8.8363,8.8363,0,0,1,4.704,4.7,8.8864,8.8864,0,0,1-.002,6.8965,8.8354,8.8354,0,0,1-4.6995,4.704A8.6053,8.6053,0,0,1,12.692,21.24Zm-.0053-.9233A7.6448,7.6448,0,0,0,18.3025,18.01a7.6411,7.6411,0,0,0,2.308-5.6147A7.6453,7.6453,0,0,0,18.303,6.779a7.6416,7.6416,0,0,0-5.6148-2.308A7.645,7.645,0,0,0,7.0725,6.7785a7.6414,7.6414,0,0,0-2.308,5.6148A7.645,7.645,0,0,0,7.072,18.009,7.6411,7.6411,0,0,0,12.6867,20.317Z"/>
                                                    </Button>
                                                </Grid>
                                            </Border>
                                        </DataTemplate>
                                    </ListBox.ItemTemplate>
                                </ListBox>
                                <Border Grid.Row="2" Grid.Column="3" VerticalAlignment="Top">
                                    <StackPanel Orientation="Vertical" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="0,5,0,0" Cursor="" >
                                        <Button Style="{StaticResource ButtonSquare}" Background="{StaticResource Black}" Click="AddTableClick" ToolTip="Добавить таблицу">
                                            <Path Fill="{StaticResource Buttons.Green}" Data="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M8.5 4.5a.5.5 0 0 0-1 0v3h-3a.5.5 0 0 0 0 1h3v3a.5.5 0 0 0 1 0v-3h3a.5.5 0 0 0 0-1h-3z" VerticalAlignment="Center"/>
                                        </Button>
                                    </StackPanel>
                                </Border>
                            </Grid>
                        </TabItem>
                        <TabItem Header="Методы" BorderBrush="{DynamicResource DarkYellow}">
                            <Grid IsEnabled="{Binding IsEditingEnabled}">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="1*" MinWidth="250" />
                                    <ColumnDefinition Width="50"/>
                                </Grid.ColumnDefinitions>
                                <ListBox Style="{StaticResource ListBoxMain}" ItemsSource="{Binding Methods}" ItemContainerStyle="{StaticResource ListBoxItemUnvisibleBorders}" ScrollViewer.HorizontalScrollBarVisibility="Disabled" VirtualizingPanel.ScrollUnit="Pixel" Margin="0,5,5,5" Background="{StaticResource Black}">
                                    <ListBox.ItemTemplate>
                                        <DataTemplate>
                                            <Border x:Name="MainBorder" Margin="2" Height="40" CornerRadius="2" Background="{DynamicResource Dark}">
                                                <Grid>
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="55*"/>
                                                        <ColumnDefinition Width="40" MaxWidth="40"/>
                                                    </Grid.ColumnDefinitions>
                                                    <StackPanel Orientation="Horizontal" Grid.Row="0" Grid.ColumnSpan="2">
                                                        <Button Style="{StaticResource ButtonSquare}" Background="{StaticResource Dark}" ToolTip="Открыть вкладку метода" Command="{Binding OpenMethodSettings}" CommandParameter="{Binding }">
                                                            <Path Fill="White" VerticalAlignment="Center" Stretch="Uniform" Width="14" Data="M184.62-200q-27.62 0-46.12-18.5Q120-237 120-264.62v-430.76q0-27.62 18.5-46.12Q157-760 184.62-760h590.76q27.62 0 46.12 18.5Q840-723 840-695.38v430.76q0 27.62-18.5 46.12Q803-200 775.38-200H184.62Zm0-40h590.76q9.24 0 16.93-7.69 7.69-7.69 7.69-16.93V-640H160v375.38q0 9.24 7.69 16.93 7.69 7.69 16.93 7.69Zm190.84-200-89.84-89.85q-5.85-5.84-6.12-14.15-.27-8.31 6.35-14.15 5.84-5.62 14.15-5.35 8.31.27 14.15 6.12l94.77 94.76q9.7 9.7 9.7 22.62 0 12.92-9.7 22.62l-95.54 95.53q-5.61 5.62-13.65 5.35-8.04-.27-13.88-6.12-5.62-5.61-5.62-13.38 0-7.77 5.62-13.38L375.46-440ZM520-300q-8.54 0-14.27-5.73T500-320q0-8.54 5.73-14.27T520-340h160q8.54 0 14.27 5.73T700-320q0 8.54-5.73 14.27T680-300H520Z"/>
                                                        </Button>

                                                        <Rectangle Width="1" Fill="{DynamicResource Area}" Margin="0,5,0,5" Opacity="0.5" />
                                                        <Label Style="{DynamicResource LabelElement}" Content="[" VerticalAlignment="Center" HorizontalAlignment="Left" Foreground="{DynamicResource DarkLight}"/>
                                                        <TextBox Style="{DynamicResource TextBoxTransparent}" IsEnabled="{Binding EditingEnabled}" Text="{Binding Name, UpdateSourceTrigger=PropertyChanged}" MaxLength="30">
                                                            <TextBox.ContextMenu>
                                                                <ContextMenu>
                                                                    <MenuItem Header="Копировать" Command="ApplicationCommands.Copy"/>
                                                                    <MenuItem Header="Вставить" Command="ApplicationCommands.Paste"/>
                                                                </ContextMenu>
                                                            </TextBox.ContextMenu>
                                                        </TextBox>
                                                        <Label Style="{DynamicResource LabelElement}" Content="]" VerticalAlignment="Center" HorizontalAlignment="Left" Foreground="{DynamicResource DarkLight}"/>
                                                    </StackPanel>
                                                    <Rectangle Width="1" Fill="{DynamicResource Area}" Grid.Column="1" Visibility="{Binding BelongsVisibility}" HorizontalAlignment="Left" Margin="-2,5,0,5" Opacity="0.5" />
                                                    <Button x:Name="RemoveButton" Style="{StaticResource ButtonSquare}" Visibility="{Binding BelongsVisibility}" IsEnabled="{Binding EditingEnabled}" Background="{StaticResource Dark}" ToolTip="Удалить метод" Grid.Column="1" Command="{Binding RemoveMethod}" CommandParameter="{Binding }">
                                                        <Path Fill="#FFFF7878" VerticalAlignment="Center" Stretch="Uniform" Margin="2" Data="M9.1182,16.61,12.6875,13.04,16.2568,16.61l.6462-.6462L13.3337,12.394,16.903,8.8248l-.6462-.6463-3.5693,3.5693L9.1182,8.1785l-.6462.6463,3.5692,3.5692L8.472,15.9633ZM12.692,21.24a8.6206,8.6206,0,0,1-3.4515-.6973,8.8354,8.8354,0,0,1-4.704-4.6995,8.8864,8.8864,0,0,1,.002-6.8965,8.8363,8.8363,0,0,1,4.7-4.704,8.8876,8.8876,0,0,1,6.8965.002,8.8363,8.8363,0,0,1,4.704,4.7,8.8864,8.8864,0,0,1-.002,6.8965,8.8354,8.8354,0,0,1-4.6995,4.704A8.6053,8.6053,0,0,1,12.692,21.24Zm-.0053-.9233A7.6448,7.6448,0,0,0,18.3025,18.01a7.6411,7.6411,0,0,0,2.308-5.6147A7.6453,7.6453,0,0,0,18.303,6.779a7.6416,7.6416,0,0,0-5.6148-2.308A7.645,7.645,0,0,0,7.0725,6.7785a7.6414,7.6414,0,0,0-2.308,5.6148A7.645,7.645,0,0,0,7.072,18.009,7.6411,7.6411,0,0,0,12.6867,20.317Z"/>
                                                    </Button>
                                                </Grid>
                                            </Border>
                                        </DataTemplate>
                                    </ListBox.ItemTemplate>
                                </ListBox>
                                <Border Grid.Row="2" Grid.Column="3" VerticalAlignment="Top">
                                    <StackPanel Orientation="Vertical" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="0,5,0,0" Cursor="" >
                                        <Button Style="{StaticResource ButtonSquare}" Background="{StaticResource Black}" Click="AddMethodClick" ToolTip="Добавить метод">
                                            <Path Fill="{StaticResource Buttons.Green}" Data="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M8.5 4.5a.5.5 0 0 0-1 0v3h-3a.5.5 0 0 0 0 1h3v3a.5.5 0 0 0 1 0v-3h3a.5.5 0 0 0 0-1h-3z" VerticalAlignment="Center"/>
                                        </Button>
                                    </StackPanel>
                                </Border>
                            </Grid>
                        </TabItem>
                        <TabItem Header="Статические методы" BorderBrush="{DynamicResource DarkYellow}">
                            <Grid IsEnabled="{Binding IsEditingEnabled}">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="1*" MinWidth="250" />
                                    <ColumnDefinition Width="50"/>
                                </Grid.ColumnDefinitions>
                                <ListBox Style="{StaticResource ListBoxMain}" ItemsSource="{Binding StaticMethods}" ItemContainerStyle="{StaticResource ListBoxItemUnvisibleBorders}" ScrollViewer.HorizontalScrollBarVisibility="Disabled" VirtualizingPanel.ScrollUnit="Pixel" Margin="0,5,5,5" Background="{StaticResource Black}">
                                    <ListBox.ItemTemplate>
                                        <DataTemplate>
                                            <Border x:Name="MainBorder" Margin="2" Height="40" CornerRadius="2" Background="{DynamicResource Dark}">
                                                <Grid>
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="55*"/>
                                                        <ColumnDefinition Width="40" MaxWidth="40"/>
                                                    </Grid.ColumnDefinitions>
                                                    <StackPanel Orientation="Horizontal" Grid.Row="0" Grid.ColumnSpan="2">
                                                        <Button Style="{StaticResource ButtonSquare}" Background="{StaticResource Dark}" ToolTip="Открыть вкладку статического метода" Command="{Binding OpenMethodSettings}" CommandParameter="{Binding }">
                                                            <Path Fill="White" VerticalAlignment="Center" Stretch="Uniform" Width="14" Data="M184.62-200q-27.62 0-46.12-18.5Q120-237 120-264.62v-430.76q0-27.62 18.5-46.12Q157-760 184.62-760h590.76q27.62 0 46.12 18.5Q840-723 840-695.38v430.76q0 27.62-18.5 46.12Q803-200 775.38-200H184.62Zm0-40h590.76q9.24 0 16.93-7.69 7.69-7.69 7.69-16.93V-640H160v375.38q0 9.24 7.69 16.93 7.69 7.69 16.93 7.69Zm190.84-200-89.84-89.85q-5.85-5.84-6.12-14.15-.27-8.31 6.35-14.15 5.84-5.62 14.15-5.35 8.31.27 14.15 6.12l94.77 94.76q9.7 9.7 9.7 22.62 0 12.92-9.7 22.62l-95.54 95.53q-5.61 5.62-13.65 5.35-8.04-.27-13.88-6.12-5.62-5.61-5.62-13.38 0-7.77 5.62-13.38L375.46-440ZM520-300q-8.54 0-14.27-5.73T500-320q0-8.54 5.73-14.27T520-340h160q8.54 0 14.27 5.73T700-320q0 8.54-5.73 14.27T680-300H520Z"/>
                                                        </Button>

                                                        <Rectangle Width="1" Fill="{DynamicResource Area}" Margin="0,5,0,5" Opacity="0.5" />
                                                        <Label Style="{DynamicResource LabelElement}" Content="[" VerticalAlignment="Center" HorizontalAlignment="Left" Foreground="{DynamicResource DarkLight}"/>
                                                        <TextBox Style="{DynamicResource TextBoxTransparent}" IsEnabled="{Binding BelongsThisClass}" Text="{Binding Name, UpdateSourceTrigger=PropertyChanged}" MaxLength="30">
                                                            <TextBox.ContextMenu>
                                                                <ContextMenu>
                                                                    <MenuItem Header="Копировать" Command="ApplicationCommands.Copy"/>
                                                                    <MenuItem Header="Вставить" Command="ApplicationCommands.Paste"/>
                                                                </ContextMenu>
                                                            </TextBox.ContextMenu>
                                                        </TextBox>
                                                        <Label Style="{DynamicResource LabelElement}" Content="]" VerticalAlignment="Center" HorizontalAlignment="Left" Foreground="{DynamicResource DarkLight}"/>
                                                    </StackPanel>
                                                    <Rectangle Width="1" Fill="{DynamicResource Area}" Grid.Column="1" Visibility="{Binding BelongsVisibility}" HorizontalAlignment="Left" Margin="-2,5,0,5" Opacity="0.5" />
                                                    <Button x:Name="RemoveButton" Style="{StaticResource ButtonSquare}" Visibility="{Binding BelongsVisibility}" Background="{StaticResource Dark}" ToolTip="Удалить метод" Grid.Column="1" Command="{Binding RemoveMethod}" CommandParameter="{Binding }">
                                                        <Path Fill="#FFFF7878" VerticalAlignment="Center" Stretch="Uniform" Margin="2" Data="M9.1182,16.61,12.6875,13.04,16.2568,16.61l.6462-.6462L13.3337,12.394,16.903,8.8248l-.6462-.6463-3.5693,3.5693L9.1182,8.1785l-.6462.6463,3.5692,3.5692L8.472,15.9633ZM12.692,21.24a8.6206,8.6206,0,0,1-3.4515-.6973,8.8354,8.8354,0,0,1-4.704-4.6995,8.8864,8.8864,0,0,1,.002-6.8965,8.8363,8.8363,0,0,1,4.7-4.704,8.8876,8.8876,0,0,1,6.8965.002,8.8363,8.8363,0,0,1,4.704,4.7,8.8864,8.8864,0,0,1-.002,6.8965,8.8354,8.8354,0,0,1-4.6995,4.704A8.6053,8.6053,0,0,1,12.692,21.24Zm-.0053-.9233A7.6448,7.6448,0,0,0,18.3025,18.01a7.6411,7.6411,0,0,0,2.308-5.6147A7.6453,7.6453,0,0,0,18.303,6.779a7.6416,7.6416,0,0,0-5.6148-2.308A7.645,7.645,0,0,0,7.0725,6.7785a7.6414,7.6414,0,0,0-2.308,5.6148A7.645,7.645,0,0,0,7.072,18.009,7.6411,7.6411,0,0,0,12.6867,20.317Z"/>
                                                    </Button>
                                                </Grid>
                                            </Border>
                                        </DataTemplate>
                                    </ListBox.ItemTemplate>
                                </ListBox>
                                <Border Grid.Row="2" Grid.Column="3" VerticalAlignment="Top">
                                    <StackPanel Orientation="Vertical" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="0,5,0,0" Cursor="" >
                                        <Button Style="{StaticResource ButtonSquare}" Background="{StaticResource Black}" Click="AddStaticMethodClick" ToolTip="Добавить статический метод">
                                            <Path Fill="{StaticResource Buttons.Green}" Data="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M8.5 4.5a.5.5 0 0 0-1 0v3h-3a.5.5 0 0 0 0 1h3v3a.5.5 0 0 0 1 0v-3h3a.5.5 0 0 0 0-1h-3z" VerticalAlignment="Center"/>
                                        </Button>
                                    </StackPanel>
                                </Border>
                            </Grid>
                        </TabItem>
                    </TabControl>

                </Grid>
            </TabItem>
            <TabItem Header="Состояния" BorderBrush="{StaticResource LightPurple}">
                <Grid IsEnabled="{Binding IsEditingEnabled}">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="1*"/>
                        <RowDefinition Height="auto"/>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="3*" MinWidth="250" />
                        <ColumnDefinition Width="5*" MaxWidth="850"/>
                    </Grid.ColumnDefinitions>
                    <Border CornerRadius="8" Margin="5" Background="{DynamicResource Black}" Grid.RowSpan="2">
                        <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
                            <StackPanel >
                                <!--Basic Options-->
                                <Border Style="{StaticResource ToolBorder}">
                                    <StackPanel>
                                        <Grid Margin="5,5,0,0">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="30"/>
                                                <ColumnDefinition/>
                                            </Grid.ColumnDefinitions>
                                            <Path Fill="{DynamicResource Yellow}" Stretch="Uniform" Width="14" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="0,0,2,0" Data="M184.62-160q-27.62 0-46.12-18.5Q120-197 120-224.62v-510.76q0-27.62 18.5-46.12Q157-800 184.62-800h183.07q27.62 0 46.12 18.5 18.5 18.5 18.5 46.12v510.76q0 27.62-18.5 46.12-18.5 18.5-46.12 18.5H184.62Zm407.69 0q-27.62 0-46.12-18.5-18.5-18.5-18.5-46.12v-510.76q0-27.62 18.5-46.12 18.5-18.5 46.12-18.5h183.07q27.62 0 46.12 18.5Q840-763 840-735.38v510.76q0 27.62-18.5 46.12Q803-160 775.38-160H592.31Zm-407.69-40h183.07q10.77 0 17.69-6.92 6.93-6.93 6.93-17.7v-510.76q0-10.77-6.93-17.7-6.92-6.92-17.69-6.92H184.62q-10.77 0-17.7 6.92-6.92 6.93-6.92 17.7v510.76q0 10.77 6.92 17.7 6.93 6.92 17.7 6.92Zm407.69 0h183.07q10.77 0 17.7-6.92 6.92-6.93 6.92-17.7v-510.76q0-10.77-6.92-17.7-6.93-6.92-17.7-6.92H592.31q-10.77 0-17.69 6.92-6.93 6.93-6.93 17.7v510.76q0 10.77 6.93 17.7 6.92 6.92 17.69 6.92ZM335.38-404.62q0-8.53-5.73-14.26-5.73-5.74-14.27-5.74h-80q-8.53 0-14.26 5.74-5.74 5.73-5.74 14.26 0 8.54 5.74 14.27 5.73 5.73 14.26 5.73h80q8.54 0 14.27-5.73t5.73-14.27Zm409.24 0q0-8.53-5.74-14.26-5.73-5.74-14.26-5.74h-80.77q-8.54 0-13.89 5.74-5.34 5.73-5.34 14.26 0 8.54 5.73 14.27t14.27 5.73h80q8.53 0 14.26-5.73 5.74-5.73 5.74-14.27Zm-409.24-112.3q0-8.54-5.73-14.27t-14.27-5.73h-80q-8.53 0-14.26 5.73-5.74 5.73-5.74 14.27t5.74 14.27q5.73 5.73 14.26 5.73h80q8.54 0 14.27-5.73t5.73-14.27Zm409.24 0q0-8.54-5.74-14.27-5.73-5.73-14.26-5.73h-80.77q-8.54 0-13.89 5.73-5.34 5.73-5.34 14.27t5.73 14.27q5.73 5.73 14.27 5.73h80q8.53 0 14.26-5.73 5.74-5.73 5.74-14.27ZM335.38-630q0-8.54-5.73-14.27T315.38-650h-80q-8.53 0-14.26 5.73-5.74 5.73-5.74 14.27t5.74 14.27q5.73 5.73 14.26 5.73h80q8.54 0 14.27-5.73t5.73-14.27Zm409.24 0q0-8.54-5.74-14.27-5.73-5.73-14.26-5.73h-80.77q-8.54 0-13.89 5.73-5.34 5.73-5.34 14.27t5.73 14.27q5.73 5.73 14.27 5.73h80q8.53 0 14.26-5.73 5.74-5.73 5.74-14.27Zm-560 430H160h232.31-207.69Zm407.69 0h-24.62H800 592.31Z"/>

                                            <Label Content="Машина состояний:" FontFamily="{StaticResource Rubik}" Foreground="{DynamicResource GrayLight}" Grid.Column="1"/>
                                        </Grid>
                                        <WrapPanel>
                                            <Button Style="{StaticResource ButtonRectangle}" ToolTip="Добавить новое состояние для объектов этого класса" Click="AddStateClick" HorizontalAlignment="Left" Grid.Column="2" >
                                                <StackPanel Orientation="Horizontal">
                                                    <Path Fill="{StaticResource Buttons.Green}" VerticalAlignment="Center" Stretch="Uniform" Data="M8.004,19.3885V9.6135a1.5425,1.5425,0,0,1,.475-1.141A1.573,1.573,0,0,1,9.6252,8.004h9.7633A1.62,1.62,0,0,1,21.004,9.62v6.29a1.5674,1.5674,0,0,1-.1308.6323,1.6576,1.6576,0,0,1-.348.5177L17.06,20.5252a1.6576,1.6576,0,0,1-.5177.348,1.5674,1.5674,0,0,1-.6323.1308H9.62A1.62,1.62,0,0,1,8.004,19.3885ZM3.029,6.6a1.5057,1.5057,0,0,1,.2567-1.2127,1.6084,1.6084,0,0,1,1.06-.6643L13.9655,3.029a1.5057,1.5057,0,0,1,1.2127.2567,1.61,1.61,0,0,1,.6643,1.06L16.054,5.62H9.62a4.0118,4.0118,0,0,0-4,4V17.4a1.6446,1.6446,0,0,1-.5818-.475,1.62,1.62,0,0,1-.3145-.7057ZM14.004,15.004v2.5a.5.5,0,1,0,1,0v-2.5h2.5a.5.5,0,1,0,0-1h-2.5v-2.5a.5.5,0,1,0-1,0v2.5h-2.5a.5.5,0,1,0,0,1Z"/>
                                                    <Label Content="Добавить состояние" Foreground="White"/>
                                                </StackPanel>
                                            </Button>
                                            <Button Style="{StaticResource ButtonRectangle}" ToolTip="Удалить выбранное состояние для объектов этого класса" HorizontalAlignment="Center" Click="RemoveSelectedStateClick" >
                                                <StackPanel Orientation="Horizontal">
                                                    <Path Fill="{StaticResource Buttons.Red}" VerticalAlignment="Center" Stretch="Uniform" Data="M13.5068,14.4591l-5.2463,5.246a.5021.5021,0,0,1-.3442.15.4665.4665,0,0,1-.3633-.15.4716.4716,0,0,1,0-.7075l5.246-5.2462L7.553,8.5051a.503.503,0,0,1-.15-.3442.4662.4662,0,0,1,.15-.3633.4716.4716,0,0,1,.7075,0l5.2463,5.246,5.2462-5.246a.5024.5024,0,0,1,.3443-.15.4662.4662,0,0,1,.3632.15.4714.4714,0,0,1,0,.7075l-5.246,5.2463,5.246,5.2462a.5024.5024,0,0,1,.15.3443.4662.4662,0,0,1-.15.3632.4714.4714,0,0,1-.7075,0Z"/>
                                                    <Label Content="Удалить состояние" Foreground="White"/>
                                                </StackPanel>
                                            </Button>
                                        </WrapPanel>
                                        <ListBox Style="{StaticResource ListBoxMain}" ItemsSource="{Binding States}" SelectedItem="{Binding SelectedState}">
                                            <ListBox.ItemTemplate>
                                                <DataTemplate>
                                                    <StackPanel Orientation="Horizontal">
                                                        <Path Fill="{DynamicResource Buttons.Green}" Stretch="Uniform" Width="14" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="0,0,2,0" Data="M620-181.54V-260h-95.38q-26.85 0-45.74-18.88Q460-297.77 460-324.62V-660H340v78.46q0 17.62-11.96 29.58Q316.08-540 298.46-540H141.54q-17.62 0-29.58-11.96Q100-563.92 100-581.54v-196.92q0-17.62 11.96-29.58Q123.92-820 141.54-820h156.92q17.62 0 29.58 11.96Q340-796.08 340-778.46V-700h280v-78.46q0-17.62 11.96-29.58Q643.92-820 661.54-820h156.92q17.62 0 29.58 11.96Q860-796.08 860-778.46v196.92q0 17.62-11.96 29.58Q836.08-540 818.46-540H661.54q-17.62 0-29.58-11.96Q620-563.92 620-581.54V-660H500v335.38q0 10.77 6.92 17.7 6.93 6.92 17.7 6.92H620v-78.46q0-17.62 11.96-29.58Q643.92-420 661.54-420h156.92q17.62 0 29.58 11.96Q860-396.08 860-378.46v196.92q0 17.62-11.96 29.58Q836.08-140 818.46-140H661.54q-17.62 0-29.58-11.96Q620-163.92 620-181.54Z"/>
                                                        <Label Foreground="White" Content="{Binding Name}"/>
                                                    </StackPanel>
                                                </DataTemplate>
                                            </ListBox.ItemTemplate>
                                        </ListBox>

                                    </StackPanel>
                                </Border>
                                <Border Style="{StaticResource ToolBorder}">
                                    <StackPanel>
                                        <Grid Margin="5,5,0,0">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="30"/>
                                                <ColumnDefinition/>
                                            </Grid.ColumnDefinitions>
                                            <Path Fill="{DynamicResource Yellow}" Stretch="Uniform" Width="14" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="0,0,2,0" Data="M620-181.54V-260h-95.38q-26.85 0-45.74-18.88Q460-297.77 460-324.62V-660H340v78.46q0 17.62-11.96 29.58Q316.08-540 298.46-540H141.54q-17.62 0-29.58-11.96Q100-563.92 100-581.54v-196.92q0-17.62 11.96-29.58Q123.92-820 141.54-820h156.92q17.62 0 29.58 11.96Q340-796.08 340-778.46V-700h280v-78.46q0-17.62 11.96-29.58Q643.92-820 661.54-820h156.92q17.62 0 29.58 11.96Q860-796.08 860-778.46v196.92q0 17.62-11.96 29.58Q836.08-540 818.46-540H661.54q-17.62 0-29.58-11.96Q620-563.92 620-581.54V-660H500v335.38q0 10.77 6.92 17.7 6.93 6.92 17.7 6.92H620v-78.46q0-17.62 11.96-29.58Q643.92-420 661.54-420h156.92q17.62 0 29.58 11.96Q860-396.08 860-378.46v196.92q0 17.62-11.96 29.58Q836.08-140 818.46-140H661.54q-17.62 0-29.58-11.96Q620-163.92 620-181.54Z"/>

                                            <Label Content="Выбранное состояние:" FontFamily="{StaticResource Rubik}" Foreground="{DynamicResource GrayLight}" Grid.Column="1"/>
                                        </Grid>

                                        <TextBox Style="{StaticResource TextBoxMain}" Tag="Наименование состояния" Text="{Binding SelectedState.Name}"/>

                                    </StackPanel>
                                </Border>
                            </StackPanel>
                        </ScrollViewer>
                    </Border>
                    <DataGrid Style="{StaticResource DataGridMain}" Margin="10" ItemsSource="{Binding SelectedState.Members}" SelectedItem="{Binding SelectedState.SelectedMember}" VirtualizingPanel.IsVirtualizing="True" EnableRowVirtualization="True" EnableColumnVirtualization="True" AutoGenerateColumns="False" Grid.Column="1">
                        <DataGrid.Columns>
                            <DataGridTemplateColumn Header="Элемент класса" IsReadOnly="True">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <StackPanel Orientation="Horizontal">
                                            <Path Fill="{StaticResource Buttons.Green}" Stretch="Uniform" Height="15" Width="15" VerticalAlignment="Center" Data="{Binding ClassMemberType, Converter={StaticResource MemberTypeToIconConverter}}"/>
                                            <TextBlock Foreground="White" Text="{Binding Name}" TextWrapping="WrapWithOverflow" FontWeight="Bold" FontSize="10" TextTrimming="CharacterEllipsis" Margin="5,0,0,0">
                                                <TextBlock.ContextMenu>
                                                    <ContextMenu>

                                                    </ContextMenu>
                                                </TextBlock.ContextMenu>
                                            </TextBlock>
                                        </StackPanel>

                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                            <DataGridTemplateColumn IsReadOnly="True" MinWidth="70" MaxWidth="70">
                                <DataGridTemplateColumn.Header>
                                    <Path Fill="{StaticResource Icon}" Stretch="Uniform" MinWidth="60" Height="15" HorizontalAlignment="Center" VerticalAlignment="Center" Data="m637.69-279.38 37.54-37.54q5.23-5.16 5.23-12.05 0-6.88-5.23-12.11L523.08-493.46q6.3-11.77 9.46-25.46 3.15-13.7 3.15-30 0-52.87-37.79-90.44-37.79-37.56-90.98-37.56-8.81 0-16.83 1-8.01 1-15.99 3.46-7.18 2.46-8.79 10.15-1.62 7.69 3.84 13.16L437-580.54l-62.15 62.16L305.46-587q-5.46-5.46-13.15-3.85-7.69 1.62-10.46 9.02-2.08 8.23-3.12 16.45-1.04 8.23-1.04 16.92 0 53.19 37.79 90.98 37.79 37.79 90.98 37.79 15.22 0 28.69-3.54t26.77-9.08l152.39 152.16q5.23 5.23 11.69 5.61 6.46.39 11.69-4.84ZM480.13-120q-74.67 0-140.41-28.34-65.73-28.34-114.36-76.92-48.63-48.58-76.99-114.26Q120-405.19 120-479.87q0-74.67 28.34-140.41 28.34-65.73 76.92-114.36 48.58-48.63 114.26-76.99Q405.19-840 479.87-840q74.67 0 140.41 28.34 65.73 28.34 114.36 76.92 48.63 48.58 76.99 114.26Q840-554.81 840-480.13q0 74.67-28.34 140.41-28.34 65.73-76.92 114.36-48.58 48.63-114.26 76.99Q554.81-120 480.13-120Z"/>
                                </DataGridTemplateColumn.Header>
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <StackPanel Orientation="Horizontal">
                                            <Button Style="{StaticResource ButtonSquareGrid}" ToolTip="Включить всё" Command="{Binding AcceptAll}">
                                                <Path Fill="{StaticResource Success}" Stretch="Uniform" Height="12" VerticalAlignment="Center" Data="m422.46-380.31-99.84-99.84q-5.62-5.62-13.77-6-8.16-.39-14.54 6-6.39 6.38-6.39 14.15 0 7.77 6.39 14.15l105.54 105.54q9.69 9.69 22.61 9.69t22.62-9.69l219.07-219.07q5.62-5.62 6-13.77.39-8.16-6-14.54-6.38-6.39-14.15-6.39-7.77 0-14.15 6.39L422.46-380.31ZM480.13-120q-74.67 0-140.41-28.34-65.73-28.34-114.36-76.92-48.63-48.58-76.99-114.26Q120-405.19 120-479.87q0-74.67 28.34-140.41 28.34-65.73 76.92-114.36 48.58-48.63 114.26-76.99Q405.19-840 479.87-840q74.67 0 140.41 28.34 65.73 28.34 114.36 76.92 48.63 48.58 76.99 114.26Q840-554.81 840-480.13q0 74.67-28.34 140.41-28.34 65.73-76.92 114.36-48.58 48.63-114.26 76.99Q554.81-120 480.13-120Z"/>
                                            </Button>
                                            <Button Style="{StaticResource ButtonSquareGrid}" ToolTip="Отключить всё" Command="{Binding RejectAll}">
                                                <Path Fill="{StaticResource Error}" Stretch="Uniform" Height="12" VerticalAlignment="Center" Data="m480-451.69 129.85 129.84q5.61 5.62 13.77 6 8.15.39 14.53-6 6.39-6.38 6.39-14.15 0-7.77-6.39-14.15L508.31-480l129.84-129.85q5.62-5.61 6-13.77.39-8.15-6-14.53-6.38-6.39-14.15-6.39-7.77 0-14.15 6.39L480-508.31 350.15-638.15q-5.61-5.62-13.77-6-8.15-.39-14.53 6-6.39 6.38-6.39 14.15 0 7.77 6.39 14.15L451.69-480 321.85-350.15q-5.62 5.61-6 13.77-.39 8.15 6 14.53 6.38 6.39 14.15 6.39 7.77 0 14.15-6.39L480-451.69Zm.13 331.69q-74.67 0-140.41-28.34-65.73-28.34-114.36-76.92-48.63-48.58-76.99-114.26Q120-405.19 120-479.87q0-74.67 28.34-140.41 28.34-65.73 76.92-114.36 48.58-48.63 114.26-76.99Q405.19-840 479.87-840q74.67 0 140.41 28.34 65.73 28.34 114.36 76.92 48.63 48.58 76.99 114.26Q840-554.81 840-480.13q0 74.67-28.34 140.41-28.34 65.73-76.92 114.36-48.58 48.63-114.26 76.99Q554.81-120 480.13-120Z"/>
                                            </Button>
                                        </StackPanel>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                            <DataGridTemplateColumn Header="Видимость в редакторе" MaxWidth="120">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <CheckBox Style="{StaticResource CheckBoxDataGridUsual}" IsChecked="{Binding EditorVisibility, Mode=TwoWay}"/>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                                <DataGridTemplateColumn.CellEditingTemplate>
                                    <DataTemplate>
                                        <CheckBox Style="{StaticResource CheckBoxDataGrid}" IsChecked="{Binding EditorVisibility, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellEditingTemplate>
                            </DataGridTemplateColumn>
                            <DataGridTemplateColumn Header="Видимость в карточке" MaxWidth="120">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <CheckBox Style="{StaticResource CheckBoxDataGridUsual}" IsChecked="{Binding CardVisibility, Mode=TwoWay}"/>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                                <DataGridTemplateColumn.CellEditingTemplate>
                                    <DataTemplate>
                                        <CheckBox Style="{StaticResource CheckBoxDataGrid}" IsChecked="{Binding CardVisibility, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellEditingTemplate>
                            </DataGridTemplateColumn>
                            <DataGridTemplateColumn Header="Доступность" MaxWidth="120">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <CheckBox Style="{StaticResource CheckBoxDataGridUsual}" IsChecked="{Binding IsEnabled, Mode=TwoWay}"/>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                                <DataGridTemplateColumn.CellEditingTemplate>
                                    <DataTemplate>
                                        <CheckBox Style="{StaticResource CheckBoxDataGrid}" IsChecked="{Binding IsEnabled, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellEditingTemplate>
                            </DataGridTemplateColumn>
                            <DataGridTemplateColumn Header="Обязательность" MaxWidth="120">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <CheckBox Style="{StaticResource CheckBoxDataGridUsual}" IsChecked="{Binding IsRequired, Mode=TwoWay}"/>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                                <DataGridTemplateColumn.CellEditingTemplate>
                                    <DataTemplate>
                                        <CheckBox Style="{StaticResource CheckBoxDataGrid}" IsEnabled="{Binding CanBeRequired}" IsChecked="{Binding IsRequired, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellEditingTemplate>
                            </DataGridTemplateColumn>
                        </DataGrid.Columns>
                    </DataGrid>
                    <Grid Margin="5" Grid.Column="1" Grid.Row="1" Visibility="{Binding SelectedState.SelectedMember.ColumnsSettingsVisibility, FallbackValue=Collapsed}" >
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition/>
                            <ColumnDefinition Width="200"/>
                        </Grid.ColumnDefinitions>
                        <DataGrid Style="{StaticResource DataGridMain}" Margin="5" MaxHeight="280" ItemsSource="{Binding SelectedState.SelectedMember.NestedMembers}" VirtualizingPanel.IsVirtualizing="True" EnableRowVirtualization="True" EnableColumnVirtualization="True" AutoGenerateColumns="False" >
                            <DataGrid.Columns>
                                <DataGridTemplateColumn Header="Колонка таблицы" IsReadOnly="True">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <StackPanel Orientation="Horizontal">
                                                <Path Fill="{StaticResource Buttons.Green}" Stretch="Uniform" Height="15" Width="15" VerticalAlignment="Center" Data="{Binding ClassMemberType, Converter={StaticResource MemberTypeToIconConverter}}"/>
                                                <TextBlock Foreground="White" Text="{Binding Name}" TextWrapping="WrapWithOverflow" FontWeight="Bold" FontSize="10" TextTrimming="CharacterEllipsis" Margin="5,0,0,0">
                                                    <TextBlock.ContextMenu>
                                                        <ContextMenu>

                                                        </ContextMenu>
                                                    </TextBlock.ContextMenu>
                                                </TextBlock>
                                            </StackPanel>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>
                                <DataGridTemplateColumn Header="Видимость в редакторе" MaxWidth="120">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <CheckBox Style="{StaticResource CheckBoxDataGridUsual}" IsChecked="{Binding EditorVisibility, Mode=TwoWay}"/>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                    <DataGridTemplateColumn.CellEditingTemplate>
                                        <DataTemplate>
                                            <CheckBox Style="{StaticResource CheckBoxDataGrid}" IsChecked="{Binding EditorVisibility, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellEditingTemplate>
                                </DataGridTemplateColumn>
                                <DataGridTemplateColumn Header="Доступность" MaxWidth="120">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <CheckBox Style="{StaticResource CheckBoxDataGridUsual}" IsChecked="{Binding IsEnabled, Mode=TwoWay}"/>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                    <DataGridTemplateColumn.CellEditingTemplate>
                                        <DataTemplate>
                                            <CheckBox Style="{StaticResource CheckBoxDataGrid}" IsChecked="{Binding IsEnabled, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellEditingTemplate>
                                </DataGridTemplateColumn>
                                <!--<DataGridTemplateColumn Header="Обязательность" MaxWidth="120">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <CheckBox Style="{StaticResource CheckBoxDataGridUsual}" IsChecked="{Binding IsRequired, Mode=TwoWay}"/>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                    <DataGridTemplateColumn.CellEditingTemplate>
                                        <DataTemplate>
                                            <CheckBox Style="{StaticResource CheckBoxDataGrid}" IsEnabled="{Binding CanBeRequired}" IsChecked="{Binding IsRequired, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellEditingTemplate>
                                </DataGridTemplateColumn>-->
                            </DataGrid.Columns>
                        </DataGrid>
                        <StackPanel Grid.Column="1">
                            <CheckBox Content="Разрешать вставку новых строк" IsChecked="{Binding SelectedState.SelectedMember.InsertEnabled}"/>
                            <CheckBox Content="Разрешать удаление строк" IsChecked="{Binding SelectedState.SelectedMember.RemoveEnabled}"/>
                        </StackPanel>
                    </Grid>
                    
                </Grid>
            </TabItem>
            <TabItem Header="Представление" BorderBrush="{StaticResource LightPurple}">
                <Grid IsEnabled="{Binding IsEditingEnabled}">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="4*" MinWidth="550"/>
                        <ColumnDefinition Width="7*"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition/>
                        <RowDefinition Height="40"/>
                    </Grid.RowDefinitions>
                    <ScrollViewer HorizontalScrollBarVisibility="Disabled">
                        <StackPanel Grid.RowSpan="2" >
                            <Border Style="{StaticResource ToolBorder}">
                                <StackPanel>
                                    <CheckBox IsChecked="{Binding PreferPage}" Content="Использовать страницу объекта как основной редактор"/>
                                    <WrapPanel>
                                        <Button Style="{StaticResource ButtonSquare}" Visibility="{Binding AddControlToRootVisibility}" ToolTip="Добавить контейнер на форму" Click="AddControlToCustomFormClick">
                                            <Path Fill="{StaticResource Buttons.Green}" Stretch="Uniform" Height="20" Data="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M8.5 4.5a.5.5 0 0 0-1 0v3h-3a.5.5 0 0 0 0 1h3v3a.5.5 0 0 0 1 0v-3h3a.5.5 0 0 0 0-1h-3z" VerticalAlignment="Center"/>
                                        </Button>
                                        <Button Style="{StaticResource ButtonSquare}" Visibility="{Binding SelectedViewControl.ContainerSettingsVisibility, TargetNullValue=Visibility.Collapsed}" ToolTip="Вложить новый контейнер в выбранный контейнер" HorizontalAlignment="Left" Grid.Column="2" Click="AddChildContainerToViewControl" >
                                            <Path Fill="{StaticResource Buttons.Green}" VerticalAlignment="Center" Stretch="Uniform" Height="20" Data="M200-200h98.46q12.75 0 21.38 8.63 8.62 8.63 8.62 21.38 0 12.76-8.62 21.37-8.63 8.62-21.38 8.62h-122.3q-15.37 0-25.76-10.4-10.4-10.39-10.4-25.76v-122.3q0-12.75 8.63-21.38 8.63-8.62 21.38-8.62 12.76 0 21.37 8.62 8.62 8.63 8.62 21.38V-200Zm560.38 0v-98.46q0-12.75 8.63-21.38 8.63-8.62 21.39-8.62 12.75 0 21.37 8.62 8.61 8.63 8.61 21.38v122.3q0 15.37-10.39 25.76-10.4 10.4-25.76 10.4H661.92q-12.75 0-21.37-8.63-8.63-8.63-8.63-21.38 0-12.76 8.63-21.37 8.62-8.62 21.37-8.62h98.46ZM200-760v98.46q0 12.75-8.63 21.38-8.63 8.62-21.38 8.62-12.76 0-21.37-8.62-8.62-8.63-8.62-21.38v-122.3q0-15.37 10.4-25.76 10.39-10.4 25.76-10.4h122.3q12.75 0 21.38 8.63 8.62 8.63 8.62 21.38 0 12.76-8.62 21.37-8.63 8.62-21.38 8.62H200Zm560.38 0h-98.46q-12.75 0-21.37-8.63-8.63-8.63-8.63-21.38 0-12.76 8.63-21.37 8.62-8.62 21.37-8.62h122.31q15.36 0 25.76 10.4 10.39 10.39 10.39 25.76v122.3q0 12.75-8.63 21.38-8.62 8.62-21.38 8.62T769-640.16q-8.62-8.63-8.62-21.38V-760Z M450-450H250q-12.75 0-21.37-8.63-8.63-8.63-8.63-21.38 0-12.76 8.63-21.37Q237.25-510 250-510h200v-200q0-12.75 8.63-21.37 8.63-8.63 21.38-8.63 12.76 0 21.37 8.63Q510-722.75 510-710v200h200q12.75 0 21.37 8.63 8.63 8.63 8.63 21.38 0 12.76-8.63 21.37Q722.75-450 710-450H510v200q0 12.75-8.63 21.37-8.63 8.63-21.38 8.63-12.76 0-21.37-8.63Q450-237.25 450-250v-200Z"/>
                                        </Button>
                                        <Button Style="{StaticResource ButtonSquare}" ToolTip="Вложить выбранный контейнер/контрол в новый контейнер" HorizontalAlignment="Left" Grid.Column="2" Click="WrapViewControlClick" >
                                            <Path Fill="{StaticResource Buttons.Green}" VerticalAlignment="Center" Stretch="Uniform" Height="20" Data="M268.46-268.46H170q-12.75 0-21.37-8.63-8.63-8.63-8.63-21.39 0-12.75 8.63-21.37 8.62-8.61 21.37-8.61h122.31q15.36 0 25.76 10.39 10.39 10.4 10.39 25.76V-170q0 12.75-8.63 21.37-8.63 8.63-21.38 8.63-12.76 0-21.37-8.63-8.62-8.62-8.62-21.37v-98.46Zm423.46 0V-170q0 12.75-8.63 21.37-8.63 8.63-21.38 8.63-12.76 0-21.37-8.63-8.62-8.62-8.62-21.37v-122.31q0-15.36 10.4-25.76 10.39-10.39 25.76-10.39h122.3q12.75 0 21.38 8.63 8.62 8.63 8.62 21.38 0 12.76-8.62 21.37-8.63 8.62-21.38 8.62h-98.46ZM268.46-691.54V-790q0-12.75 8.63-21.37 8.63-8.63 21.39-8.63 12.75 0 21.37 8.63 8.61 8.62 8.61 21.37v122.31q0 15.36-10.39 25.76-10.4 10.39-25.76 10.39H170q-12.75 0-21.37-8.63-8.63-8.63-8.63-21.38 0-12.76 8.63-21.37 8.62-8.62 21.37-8.62h98.46Zm423.46 0h98.46q12.75 0 21.38 8.63 8.62 8.63 8.62 21.39 0 12.75-8.62 21.37-8.63 8.61-21.38 8.61h-122.3q-15.37 0-25.76-10.39-10.4-10.4-10.4-25.76V-790q0-12.75 8.63-21.37 8.63-8.63 21.39-8.63 12.75 0 21.37 8.63 8.61 8.62 8.61 21.37v98.46Z M450-450H250q-12.75 0-21.37-8.63-8.63-8.63-8.63-21.38 0-12.76 8.63-21.37Q237.25-510 250-510h200v-200q0-12.75 8.63-21.37 8.63-8.63 21.38-8.63 12.76 0 21.37 8.63Q510-722.75 510-710v200h200q12.75 0 21.37 8.63 8.63 8.63 8.63 21.38 0 12.76-8.63 21.37Q722.75-450 710-450H510v200q0 12.75-8.63 21.37-8.63 8.63-21.38 8.63-12.76 0-21.37-8.63Q450-237.25 450-250v-200Z"/>
                                        </Button>
                                        <Button Style="{StaticResource ButtonSquare}" Visibility="{Binding SelectedViewControl.ContainerSettingsVisibility, TargetNullValue=Visibility.Collapsed}" ToolTip="Вложить текстовую метку в выбранный контейнер" HorizontalAlignment="Left" Grid.Column="2" Click="AddTextLabelToFormClick" Cursor="Hand" >
                                            <Path Fill="{StaticResource Buttons.Green}" VerticalAlignment="Center" Stretch="Uniform" Height="20" Data="m177.38-354.15-46.77 122.84q-3.84 10.16-11.76 15.73-7.93 5.58-18.43 5.58-17.27 0-27.11-14.31-9.85-14.31-3.77-30.54l186-474.38q3.46-9.38 11.7-15.08 8.23-5.69 17.84-5.69h25.14q10.47 0 18.32 5.69 7.84 5.7 11.3 15.08l186.24 473.85q6.07 16.61-4.02 30.99Q511.97-210 494.77-210q-10.46 0-19.44-5.95-8.97-5.95-12.71-16.36l-46.16-121.84H177.38Zm21.7-59.85h195.69l-95.2-252h-4.65l-95.84 252Zm528.61-36h-90q-12.75 0-21.37-8.63-8.63-8.63-8.63-21.38 0-12.76 8.63-21.37 8.62-8.62 21.37-8.62h90v-90q0-12.75 8.63-21.37 8.63-8.63 21.39-8.63 12.75 0 21.37 8.63 8.61 8.62 8.61 21.37v90h90q12.75 0 21.38 8.63 8.62 8.63 8.62 21.38 0 12.76-8.62 21.37-8.63 8.62-21.38 8.62h-90v90q0 12.75-8.63 21.37-8.63 8.63-21.38 8.63-12.76 0-21.37-8.63-8.62-8.62-8.62-21.37v-90Z"/>
                                        </Button>
                                        <Button Style="{StaticResource ButtonSquare}" Visibility="{Binding SelectedViewControl.ContainerSettingsVisibility, TargetNullValue=Visibility.Collapsed}" ToolTip="Добавить линию разделителя в выбранный контейнер" HorizontalAlignment="Left" Grid.Column="2" Click="AddSplitterToFormClick" >
                                            <Path Fill="{StaticResource Buttons.Green}" VerticalAlignment="Center" Stretch="Uniform" Height="20" Data="M-470.77 710-760 710Q-772.75 710-781.37 718.63-790 727.26-790 740.01-790 752.77-781.37 761.38-772.75 770-760 770L-470.77 770Q-458.02 770-449.39 761.37-440.77 752.74-440.77 739.99-440.77 727.23-449.39 718.61-458.02 710-470.77 710ZM-195.38 190-760 190Q-772.75 190-781.37 198.63-790 207.26-790 220.01-790 232.77-781.37 241.39-772.75 250-760 250L-195.38 250Q-182.63 250-174.01 241.37T-165.39 219.99Q-165.39 207.23-174.01 198.62-182.63 190-195.38 190ZM-675.38 450-760 450Q-772.75 450-781.37 458.63-790 467.26-790 480.01-790 492.77-781.37 501.38-772.75 510-760 510L-675.38 510Q-662.63 510-654.01 501.37T-645.39 479.99Q-645.39 467.23-654.01 458.62-662.63 450-675.38 450ZM-435.38 450-520 450Q-532.75 450-541.37 458.63-550 467.26-550 480.01-550 492.77-541.37 501.38-532.75 510-520 510L-435.38 510Q-422.63 510-414.01 501.37T-405.39 479.99Q-405.39 467.23-414.01 458.62-422.63 450-435.38 450ZM-195.38 450-280 450Q-292.75 450-301.37 458.63-310 467.26-310 480.01-310 492.77-301.37 501.38-292.75 510-280 510L-195.38 510Q-182.63 510-174.01 501.37T-165.39 479.99Q-165.39 467.23-174.01 458.62-182.63 450-195.38 450ZM-165.39 710-165.39 620Q-165.39 607.25-174.01 598.62-182.64 590-195.4 590-208.15 590-216.77 598.62-225.38 607.25-225.38 620L-225.38 710-315.38 710Q-328.13 710-336.76 718.63-345.38 727.26-345.38 740.01-345.38 752.77-336.76 761.38-328.13 770-315.38 770L-225.38 770-225.38 860Q-225.38 872.75-216.75 881.37-208.13 890-195.37 890-182.62 890-174 881.37-165.39 872.75-165.39 860L-165.39 770-75.38 770Q-62.63 770-54.01 761.37-45.39 752.74-45.39 739.99-45.39 727.23-54.01 718.61-62.63 710-75.38 710L-165.39 710Z"/>
                                        </Button>
                                        <Button Style="{StaticResource ButtonSquare}" ToolTip="Удалить элемент" Click="RemoveSelectedElementFromForm" >
                                            <Path Fill="{StaticResource Buttons.Red}" Stretch="Uniform" Height="20" VerticalAlignment="Center" Data="m480-437.85 122.92 122.93q8.31 8.3 20.89 8.5 12.57.19 21.27-8.5 8.69-8.7 8.69-21.08 0-12.38-8.69-21.08L522.15-480l122.93-122.92q8.3-8.31 8.5-20.89.19-12.57-8.5-21.27-8.7-8.69-21.08-8.69-12.38 0-21.08 8.69L480-522.15 357.08-645.08q-8.31-8.3-20.89-8.5-12.57-.19-21.27 8.5-8.69 8.7-8.69 21.08 0 12.38 8.69 21.08L437.85-480 314.92-357.08q-8.3 8.31-8.5 20.89-.19 12.57 8.5 21.27 8.7 8.69 21.08 8.69 12.38 0 21.08-8.69L480-437.85Zm.07 337.85q-78.84 0-148.21-29.92t-120.68-81.21q-51.31-51.29-81.25-120.63Q100-401.1 100-479.93q0-78.84 29.92-148.21t81.21-120.68q51.29-51.31 120.63-81.25Q401.1-860 479.93-860q78.84 0 148.21 29.92t120.68 81.21q51.31 51.29 81.25 120.63Q860-558.9 860-480.07q0 78.84-29.92 148.21t-81.21 120.68q-51.29 51.31-120.63 81.25Q558.9-100 480.07-100Z"/>
                                        </Button>
                                        <Button Style="{DynamicResource ButtonSquare}" ToolTip="Переместить выбранный элемент вверх" Click="MoveUpElementInForm" >
                                            <Path Fill="DodgerBlue" VerticalAlignment="Center" Stretch="Uniform" Height="20" HorizontalAlignment="Center" Data="M454-512.54v138.52q0 10.93 7.42 18.32 7.42 7.39 18.38 7.39 10.97 0 18.78-7.5 7.8-7.51 7.8-18.6v-138.13l49.31 49.31q8.31 8.31 18.39 8.11 10.07-.19 18.38-8.5 8.31-8.3 8.31-18.44t-8.31-18.32l-89.91-89.53q-9.7-9.7-22.35-9.7-12.64 0-22.12 9.84L368.31-500q-8.31 8.31-7.81 17.69.5 9.39 8.81 17.69 8.31 8.31 18.45 8.31 10.14 0 18.32-8.31L454-512.54ZM480.34-116q-75.11 0-141.48-28.42-66.37-28.42-116.18-78.21-49.81-49.79-78.25-116.09Q116-405.01 116-480.39q0-75.38 28.42-141.25t78.21-115.68q49.79-49.81 116.09-78.25Q405.01-844 480.39-844q75.38 0 141.25 28.42t115.68 78.21q49.81 49.79 78.25 115.85Q844-555.45 844-480.34q0 75.11-28.42 141.48-28.42 66.37-78.21 116.18-49.79 49.81-115.85 78.25Q555.45-116 480.34-116Z"/>
                                        </Button>
                                        <Button Style="{DynamicResource ButtonSquare}" ToolTip="Переместить выбранный элемент вниз" Click="MoveDownElementInForm" >
                                            <Path Fill="DodgerBlue" VerticalAlignment="Center" Stretch="Uniform" Height="20" HorizontalAlignment="Center" Data="m454-447.84-49.31-49.31q-8.31-8.31-18.19-8.31t-18.19 8.31q-8.31 8.3-8.31 18.44 0 10.15 8.31 18.32l89.91 89.91q9.7 9.71 22.35 9.71 12.64 0 22.12-9.85l89.77-89.77q8.31-8.17 8.31-18.32 0-10.14-8.31-18.44-8.31-8.31-18.45-8.31-10.14 0-18.32 8.31l-49.31 49.31v-138.52q0-10.93-7.41-18.32-7.42-7.4-18.39-7.4-10.96 0-18.77 7.4-7.81 7.39-7.81 18.32v138.52ZM480.34-116q-75.11 0-141.48-28.42-66.37-28.42-116.18-78.21-49.81-49.79-78.25-116.09Q116-405.01 116-480.39q0-75.38 28.42-141.25t78.21-115.68q49.79-49.81 116.09-78.25Q405.01-844 480.39-844q75.38 0 141.25 28.42t115.68 78.21q49.81 49.79 78.25 115.85Q844-555.45 844-480.34q0 75.11-28.42 141.48-28.42 66.37-78.21 116.18-49.79 49.81-115.85 78.25Q555.45-116 480.34-116Z"/>
                                        </Button>
                                        <Button Style="{StaticResource ButtonSquare}" ToolTip="Обновить предварительный просмотр" Click="UpdateFormPreview" >
                                            <Path Fill="{StaticResource PrimaryMain}" VerticalAlignment="Center" Height="20" Stretch="Uniform" Data="M6.1421,15.9157a7.44,7.44,0,0,1-.546-1.5365,7.01,7.01,0,0,1-.1885-1.6172,7.3041,7.3041,0,0,1,2.19-5.3443,7.2049,7.2049,0,0,1,5.31-2.2057h1.3865l-2.1-2.1.7078-.7078L16.21,5.712,12.9019,9.02l-.7078-.7077,2.1-2.1H12.9076A6.2484,6.2484,0,0,0,8.3019,8.1187,6.34,6.34,0,0,0,6.4076,12.762a6.3361,6.3361,0,0,0,.4845,2.4037Zm6.7713,7.104L9.6056,19.712l3.3078-3.3078.7077.7078-2.1,2.1h1.3865a6.2488,6.2488,0,0,0,4.6058-1.9068,6.3406,6.3406,0,0,0,1.8942-4.6432,6.331,6.331,0,0,0-.4845-2.4038l.75-.75a7.44,7.44,0,0,1,.546,1.5365,7.01,7.01,0,0,1,.1885,1.6173,7.3041,7.3041,0,0,1-2.19,5.3442,7.205,7.205,0,0,1-5.3095,2.2058H11.5211l2.1,2.1Z"/>
                                        </Button>
                                    </WrapPanel>
                                    <Grid MaxHeight="400" MinHeight="400">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="auto" MinWidth="40"/>
                                            <ColumnDefinition />
                                        </Grid.ColumnDefinitions>
                                        <TreeView Grid.Column="1" Style="{StaticResource TreeViewMain}" Margin="5" MinHeight="40" ItemsSource="{Binding ViewControls}" MaxHeight="400" ScrollViewer.HorizontalScrollBarVisibility="Hidden" SelectedItemChanged="TreeView_SelectedItemChanged" Grid.RowSpan="2" AllowDrop="True" >
                                            <TreeView.ItemTemplate>
                                                <HierarchicalDataTemplate ItemsSource="{Binding Children}">
                                                    <StackPanel Orientation="Horizontal">
                                                        <Path Fill="{Binding Type, Converter={StaticResource ViewControlTypeToColorConverter}}" Stretch="Uniform" Width="10" Data="{Binding Type, Converter={StaticResource ViewControlTypeToIconConverter}}"/>
                                                        <TextBlock Margin="5,0,0,0" Text="{Binding Name}" TextTrimming="WordEllipsis" TextWrapping="WrapWithOverflow" Foreground="White" />
                                                    </StackPanel>

                                                </HierarchicalDataTemplate>
                                            </TreeView.ItemTemplate>
                                        </TreeView>
                                        <Border Grid.Column="0" CornerRadius="8" MaxWidth="200" Background="{DynamicResource Dark}">
                                            <ListBox Style="{StaticResource ListBoxMain}" ScrollViewer.HorizontalScrollBarVisibility="Disabled" ItemsSource="{Binding Members}" ItemContainerStyle="{StaticResource ListBoxItemUnvisibleBorders}" MaxWidth="200">
                                                <ListBox.ItemTemplate>
                                                    <DataTemplate>
                                                        <Border Background="{StaticResource LightBlack}" CornerRadius="2" Margin="2" ClipToBounds="True">
                                                            <Grid MaxHeight="30">
                                                                <Grid.ColumnDefinitions>
                                                                    <ColumnDefinition MaxWidth="120"/>
                                                                    <ColumnDefinition Width="30"/>
                                                                </Grid.ColumnDefinitions>
                                                                <TextBlock Margin="5" Text="{Binding Name}" TextTrimming="WordEllipsis" TextWrapping="WrapWithOverflow" VerticalAlignment="Center"/>
                                                                <Button Style="{StaticResource ButtonSquare}" Grid.Column="1" MaxHeight="25" Margin="0" ToolTip="Определить член класса (поле/метод/таблицу) в выбранный контейнер" HorizontalAlignment="Left" Command="{Binding AssignToContainer}" >
                                                                    <StackPanel Orientation="Horizontal">
                                                                        <Path Fill="{StaticResource Buttons.Green}" VerticalAlignment="Center" Stretch="Uniform" Height="12" Data="M421.46-480 251.85-649.85q-5.62-5.61-6.12-13.65t6.12-14.65q6.38-6.39 14.15-6.39 7.77 0 14.15 6.39l175.54 175.53q5.23 5.24 7.35 10.7 2.11 5.46 2.11 11.92t-2.11 11.92q-2.12 5.46-7.35 10.7L280.15-281.85q-5.61 5.62-13.65 6.12t-14.65-6.12q-6.39-6.38-6.39-14.15 0-7.77 6.39-14.15L421.46-480Zm244 0L495.85-649.85q-5.62-5.61-6.12-13.65t6.12-14.65q6.38-6.39 14.15-6.39 7.77 0 14.15 6.39l175.54 175.53q5.23 5.24 7.35 10.7 2.11 5.46 2.11 11.92t-2.11 11.92q-2.12 5.46-7.35 10.7L524.15-281.85q-5.61 5.62-13.65 6.12t-14.65-6.12q-6.39-6.38-6.39-14.15 0-7.77 6.39-14.15L665.46-480Z"/>
                                                                    </StackPanel>
                                                                </Button>
                                                            </Grid>
                                                        </Border>

                                                    </DataTemplate>
                                                </ListBox.ItemTemplate>
                                            </ListBox>
                                        </Border>
                                    </Grid>

                                </StackPanel>
                            </Border>
                            <Border Style="{StaticResource ToolBorder}">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="auto"/>
                                        <ColumnDefinition/>
                                        <ColumnDefinition Width="auto"/>
                                    </Grid.ColumnDefinitions>
                                    <Button Style="{StaticResource ButtonSquare}" Visibility="{Binding SelectedViewControl.ButtonSettingsVisibility, TargetNullValue=Visibility.Collapsed}" ToolTip="Настроить элемент" HorizontalAlignment="Left" Command="{Binding SelectedViewControl.OpenSettings}" >
                                        <StackPanel Orientation="Horizontal">
                                            <Path Fill="White" VerticalAlignment="Center" Data="M7.068.727c.243-.97 1.62-.97 1.864 0l.071.286a.96.96 0 0 0 1.622.434l.205-.211c.695-.719 1.888-.03 1.613.931l-.08.284a.96.96 0 0 0 1.187 1.187l.283-.081c.96-.275 1.65.918.931 1.613l-.211.205a.96.96 0 0 0 .434 1.622l.286.071c.97.243.97 1.62 0 1.864l-.286.071a.96.96 0 0 0-.434 1.622l.211.205c.719.695.03 1.888-.931 1.613l-.284-.08a.96.96 0 0 0-1.187 1.187l.081.283c.275.96-.918 1.65-1.613.931l-.205-.211a.96.96 0 0 0-1.622.434l-.071.286c-.243.97-1.62.97-1.864 0l-.071-.286a.96.96 0 0 0-1.622-.434l-.205.211c-.695.719-1.888.03-1.613-.931l.08-.284a.96.96 0 0 0-1.186-1.187l-.284.081c-.96.275-1.65-.918-.931-1.613l.211-.205a.96.96 0 0 0-.434-1.622l-.286-.071c-.97-.243-.97-1.62 0-1.864l.286-.071a.96.96 0 0 0 .434-1.622l-.211-.205c-.719-.695-.03-1.888.931-1.613l.284.08a.96.96 0 0 0 1.187-1.186l-.081-.284c-.275-.96.918-1.65 1.613-.931l.205.211a.96.96 0 0 0 1.622-.434zM12.973 8.5H8.25l-2.834 3.779A4.998 4.998 0 0 0 12.973 8.5m0-1a4.998 4.998 0 0 0-7.557-3.779l2.834 3.78zM5.048 3.967l-.087.065zm-.431.355A4.98 4.98 0 0 0 3.002 8c0 1.455.622 2.765 1.615 3.678L7.375 8zm.344 7.646.087.065z"/>
                                        </StackPanel>
                                    </Button>
                                    <TextBox Style="{StaticResource TextBoxMain}" Tag="Имя контейнера" Text="{Binding SelectedViewControl.Name}" Grid.Column="1"/>

                                    <ComboBox Style="{StaticResource ComboBoxMain}" MinWidth="200" Visibility="{Binding SelectedViewControl.ContainerSettingsVisibility}" Tag="Имя контейнера" ItemsSource="{Binding AvailableControlTypes}" SelectedItem="{Binding SelectedViewControl.Type}" Grid.Column="2">
                                        <ComboBox.ItemTemplate>
                                            <DataTemplate>
                                                <StackPanel Orientation="Horizontal">
                                                    <Path Fill="{StaticResource LightYellow}" Stretch="Uniform" Height="12" Data="{Binding ., Converter={StaticResource ViewControlTypeToIconConverter}}"/>
                                                    <Label Content="{Binding ., Converter={StaticResource ViewControlTypeToVisibleNameConverter}}" Foreground="White"/>
                                                </StackPanel>
                                            </DataTemplate>
                                        </ComboBox.ItemTemplate>
                                    </ComboBox>


                                </Grid>
                            </Border>

                        </StackPanel>
                    </ScrollViewer>


                    <extended:Zoombox x:Name="ZoomPanel" Grid.Column="1" Scale="{Binding PreviewFormZoom}" ScrollViewer.HorizontalScrollBarVisibility="Hidden"  ZoomPercentage="1" MinScale="0.5" AnimationDuration="00:00:00.12" MaxScale="3" ViewStackMode="Disabled">
                        <Border Margin="5" CornerRadius="2" MinWidth="{Binding PreviewerWidth}" MaxWidth="{Binding PreviewerWidth}" Background="{DynamicResource Dark}" Cursor="" Padding="0,0,0,5">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="40"/>
                                    <RowDefinition Height="2"/>
                                    <RowDefinition />
                                </Grid.RowDefinitions>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition/>
                                    <ColumnDefinition Width="40"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel Orientation="Horizontal" Grid.Row="0" Visibility="{Binding EditorToolbarVisibility}">
                                    <CheckBox Style="{StaticResource ExpanderButton}" IsChecked="True" IsEnabled="False"/>
                                    <Rectangle Width="1" Fill="{DynamicResource Area}" Margin="0,5,0,5" Opacity="0.5" />
                                    <TextBox x:Name="ObjectName" Style="{DynamicResource TextBoxTransparent}" IsReadOnly="True" Text="Предварительный просмотр редактора объекта" Margin="5,0,0,0">
                                        <TextBox.ContextMenu>
                                            <ContextMenu>

                                            </ContextMenu>
                                        </TextBox.ContextMenu>
                                    </TextBox>
                                </StackPanel>
                                <WrapPanel Orientation="Horizontal" Cursor="" Visibility="{Binding PageToolbarVisibility}">
                                    <Button x:Name="GenerateButton" Style="{StaticResource ButtonRectangle}" Background="{StaticResource Dark}" Grid.Row="1" ToolTip="Сохранить этот объект" Margin="5,5,5,5" Grid.Column="1">
                                        <StackPanel Orientation="Horizontal">
                                            <Path Fill="{StaticResource Buttons.Green}" VerticalAlignment="Center" Data="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0m-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"/>
                                            <Label Content="Сохранить объект" Foreground="White"/>
                                        </StackPanel>
                                    </Button>
                                    <Button x:Name="RenderButton" Style="{StaticResource ButtonRectangle}" Grid.Row="1" ToolTip="Сохранить объект и отправить его на рендеринг в указанную папку"  Margin="5,5,5,5" Grid.Column="1">
                                        <StackPanel Orientation="Horizontal">
                                            <Path Fill="{StaticResource Buttons.Green}" VerticalAlignment="Center" Stretch="Uniform" Height="15" Data="M480-480Zm255.38 320H416.92q-8.5 0-14.25-5.76t-5.75-14.27q0-8.51 5.75-14.24t14.25-5.73h318.46q9.24 0 16.93-7.69 7.69-7.69 7.69-16.93v-510.76q0-9.24-7.69-16.93-7.69-7.69-16.93-7.69H224.62q-9.24 0-16.93 7.69-7.69 7.69-7.69 16.93v132.3q0 8.5-5.76 14.25t-14.27 5.75q-8.51 0-14.24-5.75T160-603.08v-132.3q0-27.62 18.5-46.12Q197-800 224.62-800h510.76q27.62 0 46.12 18.5Q800-763 800-735.38v510.76q0 27.62-18.5 46.12Q763-160 735.38-160Zm-446.53 40q-70.69 0-120.35-49.43-49.65-49.44-49.65-119.8 0-54.32 30.65-97.2t78.65-61.26H140q-8.5 0-14.25-5.76T120-467.72q0-8.51 5.75-14.24t14.25-5.73h129.23q13.73 0 23.02 9.29 9.29 9.28 9.29 23.02v129.23q0 8.5-5.76 14.25t-14.27 5.75q-8.51 0-14.24-5.75t-5.73-14.25V-417q-44.7 9.49-73.7 45.07-28.99 35.58-28.99 81.83 0 54.56 37.88 92.33Q234.62-160 288.85-160q8.5 0 14.25 5.76t5.75 14.27q0 8.51-5.75 14.24T288.85-120Zm128.07-180H520q8.5 0 14.25-5.76t5.75-14.27q0-8.51-5.75-14.24T520-340H416.92q-8.5 0-14.25 5.76t-5.75 14.27q0 8.51 5.75 14.24t14.25 5.73Zm0-160H640q8.5 0 14.25-5.76t5.75-14.27q0-8.51-5.75-14.24T640-500H416.92q-8.5 0-14.25 5.76t-5.75 14.27q0 8.51 5.75 14.24t14.25 5.73ZM320-620h320q8.5 0 14.25-5.76t5.75-14.27q0-8.51-5.75-14.24T640-660H320q-8.5 0-14.25 5.76T300-639.97q0 8.51 5.75 14.24T320-620Z"/>
                                            <Label Content="Отправить объект в очередь рендеринга" Foreground="White"/>
                                        </StackPanel>
                                    </Button>
                                    <TextBox Style="{StaticResource TextBoxMain}" MinWidth="200" Tag="Наименование объекта" Text="{Binding Source.Name}">

                                    </TextBox>
                                </WrapPanel>
                                <Rectangle Fill="{DynamicResource Area}" Opacity="0.5" HorizontalAlignment="Left" Grid.Column="1" Width="1" Margin="0,5,0,5"/>
                                <Button Style="{StaticResource ButtonSquare}" Background="{StaticResource Dark}" IsEnabled="False" ToolTip="Удалить объект из очереди редактирования" Grid.Column="1">
                                    <Path Fill="#FFFF7878" VerticalAlignment="Center" Stretch="Uniform" Margin="2" Data="M9.1182,16.61,12.6875,13.04,16.2568,16.61l.6462-.6462L13.3337,12.394,16.903,8.8248l-.6462-.6463-3.5693,3.5693L9.1182,8.1785l-.6462.6463,3.5692,3.5692L8.472,15.9633ZM12.692,21.24a8.6206,8.6206,0,0,1-3.4515-.6973,8.8354,8.8354,0,0,1-4.704-4.6995,8.8864,8.8864,0,0,1,.002-6.8965,8.8363,8.8363,0,0,1,4.7-4.704,8.8876,8.8876,0,0,1,6.8965.002,8.8363,8.8363,0,0,1,4.704,4.7,8.8864,8.8864,0,0,1-.002,6.8965,8.8354,8.8354,0,0,1-4.6995,4.704A8.6053,8.6053,0,0,1,12.692,21.24Zm-.0053-.9233A7.6448,7.6448,0,0,0,18.3025,18.01a7.6411,7.6411,0,0,0,2.308-5.6147A7.6453,7.6453,0,0,0,18.303,6.779a7.6416,7.6416,0,0,0-5.6148-2.308A7.645,7.645,0,0,0,7.0725,6.7785a7.6414,7.6414,0,0,0-2.308,5.6148A7.645,7.645,0,0,0,7.072,18.009,7.6411,7.6411,0,0,0,12.6867,20.317Z"/>
                                </Button>

                                <Rectangle Grid.Row="1" Fill="{DynamicResource Area}" Grid.ColumnSpan="2"/>

                                <StackPanel x:Name="FormPreviewPanel" Margin="5" Grid.Row="2" Grid.ColumnSpan="2" >

                                </StackPanel>
                            </Grid>
                        </Border>
                    </extended:Zoombox>
                    <!--<Slider Grid.Row="1" Grid.Column="1" VerticalAlignment="Center" MinWidth="200" HorizontalAlignment="Center" Minimum="0.1" Maximum="100" Value="{Binding PreviewFormZoom}"/>-->
                </Grid>
            </TabItem>
        </TabControl>
        <StackPanel IsEnabled="{Binding IsEditingEnabled}" Grid.Row="2" Grid.ColumnSpan="3" Margin="5,0,0,0" Orientation="Horizontal">
            <Button Style="{DynamicResource ButtonRectangle}" Background="{StaticResource Dark}" VerticalAlignment="Center"  IsDefault="True" Click="SaveClick" Grid.Row="3" ToolTip="Сохранить класс и закрыть">
                <StackPanel Orientation="Horizontal" Margin="5,0,5,0">
                    <Path Fill="{StaticResource Buttons.Green}" Data="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0m-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z" VerticalAlignment="Center"/>
                    <Label Foreground="White" Content="Сохранить класс"/>
                </StackPanel>
            </Button>
            <Button x:Name="SaveDraftButton" Style="{DynamicResource ButtonRectangle}" Background="{StaticResource Dark}" VerticalAlignment="Center" Click="SaveDraft" Grid.Row="3" ToolTip="Сохранить все изменения как черновик класса">
                <StackPanel Orientation="Horizontal" Margin="5,0,5,0">
                    <Path Fill="{StaticResource Buttons.Green}" Height="15" Stretch="Uniform" VerticalAlignment="Center" Data="m698.77-684.54 119.92-120.3q8.92-9.31 21.19-9.31 12.27 0 21.58 9.31 9.31 9.3 9.31 21.38 0 12.08-9.31 21.38L724.08-625.31q-10.85 10.85-25.31 10.85-14.46 0-25.31-10.85l-52.77-52.77q-8.31-8.3-8.31-20.57t8.31-21.19q8.92-9.31 21.39-9.12 12.46.19 21.38 9.12l35.31 35.3ZM480-261.54l-158.77 68.15q-36.15 15.46-68.69-5.92Q220-220.69 220-259.46v-488.23q0-29.92 21.19-51.12Q262.39-820 292.31-820h213.84q16.47 0 24.5 14.27 8.04 14.27 1.2 29.73-6.23 15.85-9.04 31.69Q520-728.46 520-710q0 70.85 45.88 123.73 45.89 52.89 114.12 63.42 7.38 1.23 13.23 1.54 5.85.31 11.38.31 14.7.38 25.04 9.92Q740-501.54 740-487.46v228q0 38.77-32.54 60.15-32.54 21.38-68.69 5.92L480-261.54Z"/>
                    <Label Foreground="White" Content="Сохранить черновик"/>
                </StackPanel>
            </Button>
            <Button x:Name="ApplyDraftButton" Style="{DynamicResource ButtonRectangle}" Background="{StaticResource Dark}" VerticalAlignment="Center" Click="LoadDraft" Grid.Row="3" ToolTip="Отменить все текущие изменения и вернуться к последнему сохраненному черновику класса">
                <StackPanel Orientation="Horizontal" Margin="5,0,5,0">
                    <Path Fill="{StaticResource Buttons.Red}" Height="15" Stretch="Uniform" VerticalAlignment="Center" Data="M479.23-140q-120.61 0-212.61-73.62-92-73.61-117.93-188.38-3.23-11.92 3.89-21.92 7.11-10 20.15-11.62 12.27-1.61 22 4.85t13.58 19Q231.15-319 306.73-259.5t172.5 59.5q117 0 198.5-81.5t81.5-198.5q0-117-81.5-198.5T479.23-760q-65.54 0-122.84 29.12-57.31 29.11-98.7 80.11h74.62q12.75 0 21.37 8.63 8.63 8.63 8.63 21.38 0 12.76-8.63 21.37-8.62 8.62-21.37 8.62H195.39q-15.37 0-25.76-10.4-10.4-10.39-10.4-25.76v-136.92q0-12.75 8.63-21.37 8.63-8.63 21.39-8.63 12.75 0 21.37 8.63 8.61 8.62 8.61 21.37v64.77q48.69-57.46 116.62-89.19Q403.77-820 479.23-820q70.8 0 132.63 26.77t107.83 72.77q46 46 72.77 107.82 26.77 61.83 26.77 132.62t-26.77 132.63q-26.77 61.85-72.77 107.85-46 46-107.83 72.77Q550.03-140 479.23-140Zm31.15-352.15 110 110q8.31 8.3 8.5 20.88.2 12.58-8.5 21.27-8.69 8.69-21.07 8.69-12.39 0-21.08-8.69l-117-117q-5.61-5.62-8.23-12.24-2.61-6.62-2.61-13.68V-650q0-12.75 8.62-21.38 8.63-8.62 21.39-8.62 12.75 0 21.37 8.62 8.61 8.63 8.61 21.38v157.85Z"/>
                    <Label Foreground="White" Content="Вернуться к черновику"/>
                </StackPanel>
            </Button>
        </StackPanel>
    </Grid>
</Window>
