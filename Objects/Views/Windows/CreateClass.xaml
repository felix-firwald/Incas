<Window x:Class="Incas.Objects.Views.Windows.CreateClass"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:conv="clr-namespace:Incas.Core.Converters" xmlns:extended="http://schemas.xceed.com/wpf/xaml/toolkit"
        xmlns:local="clr-namespace:Incas.Objects.Views.Windows" xmlns:fa="http://schemas.fontawesome.io/icons/" xmlns:local1="clr-namespace:Incas.Objects.Converters" xmlns:classes="clr-namespace:Incas.Objects.Views.Controls" xmlns:avalonEdit="http://icsharpcode.net/sharpdevelop/avalonedit" xmlns:system="clr-namespace:System;assembly=mscorlib" xmlns:ngv="clr-namespace:NodeGraph.View;assembly=NodeGraph"
        mc:Ignorable="d"
        Title="Создать класс" Height="750" Width="1000" MinHeight="750" MinWidth="960" WindowStartupLocation="CenterScreen" Style="{StaticResource WindowBase}" Background="{StaticResource Black}">
    <Window.Resources>
        <ResourceDictionary>            
            <local1:FieldTypeToColorConverter x:Key="FieldTypeToColorConverter"/>
            <local1:FieldTypeToVisibleNameConverter x:Key="FieldTypeToVisibleNameConverter"/>
            <conv:IEColorToBrushConverter x:Key="IEColorToBrushConverter"/>
            <conv:PathDataToGeometryConverter x:Key="PathDataToGeometryConverter"/>
            <local1:ViewControlTypeToVisibleNameConverter x:Key="ViewControlTypeToVisibleNameConverter"/>
            <local1:ViewControlTypeToIconConverter x:Key="ViewControlTypeToIconConverter"/>
            <local1:ViewControlTypeToColorConverter x:Key="ViewControlTypeToColorConverter"/>
        </ResourceDictionary>
    </Window.Resources>
    <Grid Grid.ColumnSpan="2">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="1*" />
            <ColumnDefinition Width="50"/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="40"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="50"/>
        </Grid.RowDefinitions>
        <Grid Grid.Column="1" Grid.ColumnSpan="2" Panel.ZIndex="2">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>
        </Grid>

        <TabControl x:Name="TabControlMain" Style="{StaticResource TabControlMain}" Background="{DynamicResource Black}" Margin="0" ItemContainerStyle="{StaticResource TabItemMain}" Grid.RowSpan="2" Grid.ColumnSpan="2">
            <TabItem Header="Атрибуты и члены класса"  BorderBrush="{DynamicResource LightPurple}">
                <Grid Background="{DynamicResource Black}">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="5*" MinWidth="250" />
                        <ColumnDefinition Width="5*" MaxWidth="850"/>
                    </Grid.ColumnDefinitions>
                    
                    <Border CornerRadius="8" Margin="5,5,0,5" Background="{DynamicResource Black}" Grid.Row="1">
                        <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
                            <StackPanel >
                                <!--Inheritance-->
                                <Border Style="{StaticResource ToolBorder}" Visibility="{Binding InheritanceVisibility}">

                                    <Grid Margin="5">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="30"/>
                                            <ColumnDefinition/>
                                        </Grid.ColumnDefinitions>
                                        <Path Fill="{DynamicResource Yellow}" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="0" Stretch="Uniform" Data="M4.02,19.0346V14.85a.79.79,0,0,1,.8077-.8153h6.2308a.7934.7934,0,0,1,.8077.8078v4.1847a.79.79,0,0,1-.8077.8153H4.8275a.7934.7934,0,0,1-.8077-.8078Zm0-8.1922V6.6576a.79.79,0,0,1,.8077-.8152h6.2308a.7932.7932,0,0,1,.8077.8077v4.1848a.79.79,0,0,1-.8077.8152H4.8275a.7932.7932,0,0,1-.8077-.8077Zm1-.1923H10.866V6.8424H5.02Zm12.94,8.8635a.808.808,0,0,1-.2955-.053.7816.7816,0,0,1-.2672-.1837l-3.3885-3.3883a.4423.4423,0,0,1-.1338-.3415.5053.5053,0,0,1,.1563-.3505.4512.4512,0,0,1,.3312-.137.4575.4575,0,0,1,.3348.1405l2.7652,2.721V6.3424a.5.5,0,1,1,1,0V17.9211L21.2275,15.2a.4845.4845,0,0,1,.339-.14.4663.4663,0,0,1,.3528.14.4568.4568,0,0,1,.137.341.4724.4724,0,0,1-.14.3475l-3.3885,3.3883a.7721.7721,0,0,1-.27.1837A.8276.8276,0,0,1,17.96,19.5136Z"/>
                                        <StackPanel Grid.Column="1" Orientation="Horizontal">
                                            <Label Content="Наследуется от:" FontFamily="{StaticResource Rubik}" Foreground="{DynamicResource GrayLight}" />
                                            <TextBlock Margin="12,5,5,5" Style="{StaticResource TextBlockMain}" TextTrimming="WordEllipsis" Foreground="{DynamicResource GrayLight}" Text="{Binding Inheritance}"/>
                                        </StackPanel>
                                    </Grid>
                                </Border>
                                <!--Basic Options-->
                                <Border Style="{StaticResource ToolBorder}">
                                    <StackPanel>
                                        <Grid Margin="5,5,0,0">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="30"/>
                                                <ColumnDefinition/>
                                            </Grid.ColumnDefinitions>
                                            <Path Fill="{DynamicResource Yellow}" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="0,0,2,0" Data="M7.068.727c.243-.97 1.62-.97 1.864 0l.071.286a.96.96 0 0 0 1.622.434l.205-.211c.695-.719 1.888-.03 1.613.931l-.08.284a.96.96 0 0 0 1.187 1.187l.283-.081c.96-.275 1.65.918.931 1.613l-.211.205a.96.96 0 0 0 .434 1.622l.286.071c.97.243.97 1.62 0 1.864l-.286.071a.96.96 0 0 0-.434 1.622l.211.205c.719.695.03 1.888-.931 1.613l-.284-.08a.96.96 0 0 0-1.187 1.187l.081.283c.275.96-.918 1.65-1.613.931l-.205-.211a.96.96 0 0 0-1.622.434l-.071.286c-.243.97-1.62.97-1.864 0l-.071-.286a.96.96 0 0 0-1.622-.434l-.205.211c-.695.719-1.888.03-1.613-.931l.08-.284a.96.96 0 0 0-1.186-1.187l-.284.081c-.96.275-1.65-.918-.931-1.613l.211-.205a.96.96 0 0 0-.434-1.622l-.286-.071c-.97-.243-.97-1.62 0-1.864l.286-.071a.96.96 0 0 0 .434-1.622l-.211-.205c-.719-.695-.03-1.888.931-1.613l.284.08a.96.96 0 0 0 1.187-1.186l-.081-.284c-.275-.96.918-1.65 1.613-.931l.205.211a.96.96 0 0 0 1.622-.434zM12.973 8.5H8.25l-2.834 3.779A4.998 4.998 0 0 0 12.973 8.5m0-1a4.998 4.998 0 0 0-7.557-3.779l2.834 3.78zM5.048 3.967l-.087.065zm-.431.355A4.98 4.98 0 0 0 3.002 8c0 1.455.622 2.765 1.615 3.678L7.375 8zm.344 7.646.087.065z"/>

                                            <Label Content="Базовые настройки:" FontFamily="{StaticResource Rubik}" Foreground="{DynamicResource GrayLight}" Grid.Column="1"/>
                                        </Grid>
                                        <ComboBox Style="{StaticResource ComboBoxMain}" IsEnabled="{Binding InCustomClassEnabledOnly}" ItemsSource="{Binding AvailableComponents}" SelectedItem="{Binding SelectedComponent, Mode=TwoWay}" ToolTip="Компонент, к которому относится класс">
                                            <ComboBox.ItemTemplate>
                                                <DataTemplate>
                                                    <StackPanel Orientation="Horizontal">
                                                        <Path Height="15" Width="15" Stretch="Uniform" Fill="{Binding Color, Converter={StaticResource IEColorToBrushConverter}}" Data="{Binding Icon, Converter={StaticResource PathDataToGeometryConverter}}"/>
                                                        <Label Margin="5,0,0,0" FontFamily="{StaticResource Rubik}" Foreground="White" Content="{Binding Name}"/>
                                                    </StackPanel>
                                                </DataTemplate>
                                            </ComboBox.ItemTemplate>
                                        </ComboBox>
                                        <TextBox Style="{StaticResource TextBoxMain}" Text="{Binding NameOfClass}" IsEnabled="{Binding InCustomClassEnabledOnly}" Tag="Наименование класса" MaxLength="50" ToolTip="Наименование класса (везде)"/>
                                        <TextBox Style="{StaticResource TextBoxMain}" Text="{Binding ListName}" Tag="Наименование списка объектов" MaxLength="75" ToolTip="Наименование списка объектов (во всех вкладках, где показывается список объектов класса)"/>
                                    </StackPanel>
                                </Border>
                                <Border Style="{StaticResource ToolBorder}">
                                    <StackPanel>
                                        <Grid Margin="5">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="30"/>
                                                <ColumnDefinition/>
                                            </Grid.ColumnDefinitions>
                                            <Path Fill="{DynamicResource Yellow}" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="0" Stretch="Uniform" Height="15" Data="M247.23-127.31q-26.85 3.46-47.96-12.81-21.12-16.26-24.35-43.11l-49.15-388.54q-3.23-26.85 13.31-48.61 16.54-21.77 43.38-24.24l39.08-2.92v281.39q0 59.84 42.38 102.23 42.39 42.38 102.23 42.38h367.39q.15 14-9.77 24.58-9.92 10.58-24.39 12.81l-452.15 56.84Zm118.92-174.23q-27.61 0-46.11-18.5t-18.5-46.11v-409.23q0-27.62 18.5-46.12 18.5-18.5 46.11-18.5h409.23q27.62 0 46.12 18.5Q840-803 840-775.38v409.23q0 27.61-18.5 46.11t-46.12 18.5H366.15Zm188.47-124.84q7.46 4.23 16.15 4.23 8.69 0 16.15-4.23l101.54-57.77q7.46-4.23 11.81-11.81 4.35-7.58 4.35-16.27v-117.08q0-8.69-4.35-16.27-4.35-7.57-11.81-11.8l-101.54-57.77q-7.46-4.23-16.15-4.23-8.69 0-16.15 4.23l-101.54 57.77q-7.46 4.23-11.81 11.8-4.35 7.58-4.35 16.27v117.08q0 8.69 4.35 16.27t11.81 11.81l101.54 57.77Z"/>
                                            <Label Grid.Column="1" Content="Имплементация обобщений:" FontFamily="{StaticResource Rubik}" Foreground="{DynamicResource GrayLight}" />
                                        </Grid>
                                        <Button Style="{StaticResource ButtonRectangle}" ToolTip="Добавить новое обобщение" HorizontalAlignment="Left" Grid.Column="2" >
                                            <StackPanel Orientation="Horizontal">
                                                <Path Fill="{StaticResource Buttons.Green}" VerticalAlignment="Center" Stretch="Uniform" Data="M8.004,19.3885V9.6135a1.5425,1.5425,0,0,1,.475-1.141A1.573,1.573,0,0,1,9.6252,8.004h9.7633A1.62,1.62,0,0,1,21.004,9.62v6.29a1.5674,1.5674,0,0,1-.1308.6323,1.6576,1.6576,0,0,1-.348.5177L17.06,20.5252a1.6576,1.6576,0,0,1-.5177.348,1.5674,1.5674,0,0,1-.6323.1308H9.62A1.62,1.62,0,0,1,8.004,19.3885ZM3.029,6.6a1.5057,1.5057,0,0,1,.2567-1.2127,1.6084,1.6084,0,0,1,1.06-.6643L13.9655,3.029a1.5057,1.5057,0,0,1,1.2127.2567,1.61,1.61,0,0,1,.6643,1.06L16.054,5.62H9.62a4.0118,4.0118,0,0,0-4,4V17.4a1.6446,1.6446,0,0,1-.5818-.475,1.62,1.62,0,0,1-.3145-.7057ZM14.004,15.004v2.5a.5.5,0,1,0,1,0v-2.5h2.5a.5.5,0,1,0,0-1h-2.5v-2.5a.5.5,0,1,0-1,0v2.5h-2.5a.5.5,0,1,0,0,1Z"/>
                                                <Label Content="Имплементировать обобщение" Foreground="White"/>
                                            </StackPanel>
                                        </Button>
                                        <ListBox Style="{StaticResource ListBoxMain}" MinHeight="40">

                                        </ListBox>
                                    </StackPanel>

                                </Border>
                                <!--TemplateName and Card-->
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition/>
                                        <ColumnDefinition/>
                                    </Grid.ColumnDefinitions>
                                    <Border Style="{StaticResource ToolBorder}">
                                        <StackPanel>
                                            <Grid Margin="5,5,0,0">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="30"/>
                                                    <ColumnDefinition/>
                                                </Grid.ColumnDefinitions>
                                                <Path Fill="{DynamicResource Yellow}" Data="m3.266 12.496.96-2.853H7.76l.96 2.853H10L6.62 3H5.38L2 12.496zm2.748-8.063 1.419 4.23h-2.88l1.426-4.23zm6.132 7.203v-.075c0-.332.234-.618.619-.618.354 0 .618.256.618.58 0 .362-.271.649-.52.898l-1.788 1.832V15h3.59v-.958h-1.923v-.045l.973-1.04c.415-.438.867-.845.867-1.547 0-.8-.701-1.41-1.787-1.41-1.23 0-1.795.8-1.795 1.576v.06z" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="0,0,2,0"/>

                                                <Label Content="Наименование объектов:" FontFamily="{StaticResource Rubik}" Foreground="{DynamicResource GrayLight}" Grid.Column="1"/>
                                            </Grid>
                                            <TextBox x:Name="NameTemplate" Style="{StaticResource TextBoxMain}" Text="{Binding NameTemplate}" Tag="Шаблон названия" MaxLength="75">
                                                <TextBox.ContextMenu>
                                                    <ContextMenu>
                                                        <MenuItem Header="Копировать" Command="ApplicationCommands.Copy"/>
                                                        <MenuItem Header="Вставить" Command="ApplicationCommands.Paste"/>
                                                        <Separator Background="{DynamicResource LightBlack}"/>
                                                        <MenuItem Header="Вставить имя поля" Click="InsertFieldNameClick"/>
                                                    </ContextMenu>
                                                </TextBox.ContextMenu>
                                            </TextBox>
                                        </StackPanel>
                                    </Border>
                                    <Border x:Name="CardArea" Style="{StaticResource ToolBorder}" Grid.Column="1">
                                        <StackPanel>
                                            <Grid Margin="5,5,0,0">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="30"/>
                                                    <ColumnDefinition/>
                                                </Grid.ColumnDefinitions>
                                                <Path Fill="{DynamicResource Yellow}" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="0,0,2,0" Data="M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2zm9 1.5a.5.5 0 0 0 .5.5h4a.5.5 0 0 0 0-1h-4a.5.5 0 0 0-.5.5M9 8a.5.5 0 0 0 .5.5h4a.5.5 0 0 0 0-1h-4A.5.5 0 0 0 9 8m1 2.5a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 0-1h-3a.5.5 0 0 0-.5.5m-1 2C9 10.567 7.21 9 5 9c-2.086 0-3.8 1.398-3.984 3.181A1 1 0 0 0 2 13h6.96q.04-.245.04-.5M7 6a2 2 0 1 0-4 0 2 2 0 0 0 4 0"/>

                                                <Label Content="Карточка объекта:" FontFamily="{StaticResource Rubik}" Foreground="{DynamicResource GrayLight}" Grid.Column="1"/>
                                            </Grid>
                                            <CheckBox Style="{StaticResource CheckBoxMain}" Content="Показывать карточку объекта" IsChecked="{Binding ShowCard}"/>
                                        </StackPanel>
                                    </Border>

                                </Grid>

                                <Border x:Name="AccessArea" Style="{StaticResource ToolBorder}">
                                    <StackPanel>
                                        <Grid Margin="5,5,0,0">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="30"/>
                                                <ColumnDefinition/>
                                            </Grid.ColumnDefinitions>
                                            <Path Fill="{DynamicResource Yellow}" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="0,0,2,0" Data="M11 5a3 3 0 1 1-6 0 3 3 0 0 1 6 0m-9 8c0 1 1 1 1 1h5v-1a2 2 0 0 1 .01-.2 4.49 4.49 0 0 1 1.534-3.693Q8.844 9.002 8 9c-5 0-6 3-6 4m7 0a1 1 0 0 1 1-1v-1a2 2 0 1 1 4 0v1a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1zm3-3a1 1 0 0 0-1 1v1h2v-1a1 1 0 0 0-1-1"/>

                                            <Label Content="Редактирование:" FontFamily="{StaticResource Rubik}" Foreground="{DynamicResource GrayLight}" Grid.Column="1"/>

                                        </Grid>
                                        <CheckBox Style="{StaticResource CheckBoxMain}" Content="Редактирование объекта доступно только автору" IsChecked="{Binding EditByAuthorOnly}"/>
                                        <CheckBox Style="{StaticResource CheckBoxMain}" Content="Разрешить переопределение автора и делегирование" IsChecked="{Binding AuthorOverrideEnabled}"/>
                                    </StackPanel>
                                </Border>
                                <Border Style="{StaticResource ToolBorder}" Grid.Column="1">
                                    <StackPanel>
                                        <Grid Margin="5,5,0,0">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="30"/>
                                                <ColumnDefinition/>
                                            </Grid.ColumnDefinitions>
                                            <Path Fill="{DynamicResource Yellow}" HorizontalAlignment="Center" VerticalAlignment="Center" Stretch="Uniform" Height="15" Margin="0,0,2,0" Data="M600-160q-27.62 0-46.12-18.5-18.5-18.5-18.5-46.12v-510.76q0-27.62 18.5-46.12Q572.38-800 600-800h110.77q27.61 0 46.12 18.5 18.5 18.5 18.5 46.12v510.76q0 27.62-18.5 46.12-18.51 18.5-46.12 18.5H600Zm-350.77 0q-27.61 0-46.11-18.5-18.51-18.5-18.51-46.12v-510.76q0-27.62 18.51-46.12 18.5-18.5 46.11-18.5H360q27.62 0 46.12 18.5 18.5 18.5 18.5 46.12v510.76q0 27.62-18.5 46.12Q387.62-160 360-160H249.23Zm-24.61-575.38v510.76q0 9.24 7.69 16.93Q240-200 249.23-200H360q9.23 0 16.92-7.69 7.7-7.69 7.7-16.93v-510.76q0-9.24-7.7-16.93Q369.23-760 360-760H249.23q-9.23 0-16.92 7.69-7.69 7.69-7.69 16.93Z"/>

                                            <Label Content="Список объектов:" FontFamily="{StaticResource Rubik}" Foreground="{DynamicResource GrayLight}" Grid.Column="1"/>

                                        </Grid>
                                        <CheckBox x:Name="ButtonPresetsEnabled" Style="{StaticResource CheckBoxMain}" Content="Ограничить просмотр общего списка" IsChecked="{Binding PresetsEnabled}"/>
                                        <ListBox Style="{StaticResource ListBoxMain}" MinHeight="40" ItemContainerStyle="{StaticResource ListBoxItemUnselectable}" ItemsSource="{Binding MapFieldsList}" MaxHeight="200">
                                            <ListBox.ItemTemplate>
                                                <DataTemplate>
                                                    <CheckBox Style="{StaticResource CheckBoxMain}" MinHeight="15" Margin="2" Content="{Binding Name}" IsEnabled="{Binding BelongsThisClass}" IsChecked="{Binding ListVisibility}"/>
                                                </DataTemplate>
                                            </ListBox.ItemTemplate>
                                        </ListBox>
                                    </StackPanel>
                                </Border>
                                <Border Style="{StaticResource ToolBorder}" Grid.Column="1">
                                    <StackPanel>
                                        <Grid Margin="5,5,0,0">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition MaxWidth="30"/>
                                                <ColumnDefinition/>
                                            </Grid.ColumnDefinitions>
                                            <Path Fill="{DynamicResource Yellow}" HorizontalAlignment="Center" VerticalAlignment="Center" Stretch="Uniform" Height="15" Margin="0,0,2,0" Data="M520-620v60q0 8.5 5.76 14.25t14.27 5.75q8.51 0 14.24-5.75T560-560v-60h60q8.5 0 14.25-5.76t5.75-14.27q0-8.51-5.75-14.24T620-660h-60v-60q0-8.5-5.76-14.25T539.97-740q-8.51 0-14.24 5.75T520-720v60h-60q-8.5 0-14.25 5.76T440-639.97q0 8.51 5.75 14.24T460-620h60Zm-60 240h160q8.5 0 14.25-5.76t5.75-14.27q0-8.51-5.75-14.24T620-420H460q-8.5 0-14.25 5.76T440-399.97q0 8.51 5.75 14.24T460-380ZM344.62-240q-27.62 0-46.12-18.5Q280-277 280-304.62v-510.76q0-27.62 18.5-46.12Q317-880 344.62-880h248.53q13.27 0 25.29 5.23t20.71 13.92l141.7 141.7q8.69 8.69 13.92 20.71 5.23 12.02 5.23 25.29v368.53q0 27.62-18.5 46.12Q763-240 735.38-240H344.62Zm-160 160Q157-80 138.5-98.5 120-117 120-144.62V-620q0-8.5 5.76-14.25t14.27-5.75q8.51 0 14.24 5.75T160-620v475.38q0 9.24 7.69 16.93 7.69 7.69 16.93 7.69H540q8.5 0 14.25 5.76T560-99.97q0 8.51-5.75 14.24T540-80H184.62Z"/>

                                            <Label Content="Контроль уникальности:" FontFamily="{StaticResource Rubik}" Foreground="{DynamicResource GrayLight}" Grid.Column="1"/>

                                        </Grid>
                                        <ListBox Style="{StaticResource ListBoxMain}" MinHeight="40" ItemContainerStyle="{StaticResource ListBoxItemUnselectable}" ItemsSource="{Binding MapFieldsList}" MaxHeight="200">
                                            <ListBox.ItemTemplate>
                                                <DataTemplate>
                                                    <CheckBox Style="{StaticResource CheckBoxMain}" MinHeight="15" Margin="2" Content="{Binding Name}" IsEnabled="{Binding BelongsThisClass}" IsChecked="{Binding IsUnique}"/>
                                                </DataTemplate>
                                            </ListBox.ItemTemplate>
                                        </ListBox>
                                    </StackPanel>
                                </Border>
                            </StackPanel>
                        </ScrollViewer>
                    </Border>
                    <TabControl Style="{StaticResource TabControlMain}" ItemContainerStyle="{StaticResource TabItemMain}" Grid.Column="1" Background="{x:Null}">
                        <TabItem Header="Поля" BorderBrush="{DynamicResource DarkYellow}">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="1*" MinWidth="250" />
                                    <ColumnDefinition Width="50"/>
                                </Grid.ColumnDefinitions>
                                <ListBox Style="{StaticResource ListBoxMain}" ItemsSource="{Binding Fields}" ItemContainerStyle="{StaticResource ListBoxItemUnvisibleBorders}" ScrollViewer.HorizontalScrollBarVisibility="Disabled" VirtualizingPanel.ScrollUnit="Pixel" Margin="0,5,5,5" Background="{StaticResource Black}">
                                    <ListBox.ItemTemplate>
                                        <DataTemplate>
                                            <Border x:Name="MainBorder" Margin="2" CornerRadius="8" Background="{DynamicResource Dark}">
                                                <Border.Style>
                                                    <Style TargetType="{x:Type Border}">
                                                        <Setter Property="Height" Value="Auto"/>
                                                        <Style.Triggers>
                                                            <DataTrigger Binding="{Binding ElementName=ExpanderButton, Path=IsChecked}" Value="False">
                                                                <Setter Property="Height" Value="40"/>
                                                            </DataTrigger>
                                                        </Style.Triggers>
                                                    </Style>
                                                </Border.Style>
                                                <Grid>
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="55*"/>
                                                        <ColumnDefinition Width="40" MaxWidth="40"/>
                                                    </Grid.ColumnDefinitions>
                                                    <Grid.RowDefinitions>
                                                        <RowDefinition Height="40"/>
                                                        <RowDefinition Height="2"/>
                                                        <RowDefinition />
                                                    </Grid.RowDefinitions>
                                                    <StackPanel Orientation="Horizontal" Grid.Row="0" Grid.ColumnSpan="2">
                                                        <CheckBox x:Name="ExpanderButton" Style="{StaticResource ExpanderButton}" IsChecked="{Binding IsExpanded}" ToolTip="Свернуть / развернуть поле"/>
                                                        <Rectangle Width="1" Fill="{DynamicResource Area}" Margin="0,5,0,5" Opacity="0.5" />
                                                        <Label Style="{DynamicResource LabelElement}" Content="[" VerticalAlignment="Center" HorizontalAlignment="Left" Foreground="{DynamicResource DarkLight}"/>
                                                        <TextBox Style="{DynamicResource TextBoxTransparent}" IsEnabled="{Binding BelongsThisClass}" Text="{Binding Name, UpdateSourceTrigger=PropertyChanged}" MaxLength="30">
                                                            <TextBox.ContextMenu>
                                                                <ContextMenu>
                                                                    <MenuItem Header="Копировать" Command="ApplicationCommands.Copy"/>
                                                                    <MenuItem Header="Вставить" Command="ApplicationCommands.Paste"/>
                                                                </ContextMenu>
                                                            </TextBox.ContextMenu>
                                                        </TextBox>
                                                        <Label Style="{DynamicResource LabelElement}" Content="]" VerticalAlignment="Center" HorizontalAlignment="Left" Foreground="{DynamicResource DarkLight}"/>
                                                    </StackPanel>

                                                    <Rectangle Grid.Row="1" Fill="{DynamicResource Area}" Grid.ColumnSpan="2" />

                                                    <StackPanel Grid.Row="2" x:Name="ContentPanel" IsEnabled="{Binding BelongsThisClass}">

                                                        <TextBox Style="{DynamicResource TextBoxMain}" IsReadOnly="False" Tag="Отображаемое название" Text="{Binding VisibleName, UpdateSourceTrigger=PropertyChanged}" MaxLength="50" TextWrapping="Wrap">
                                                            <TextBox.ContextMenu>
                                                                <ContextMenu>
                                                                    <MenuItem Header="Копировать" Command="ApplicationCommands.Copy"/>
                                                                    <MenuItem Header="Вставить" Command="ApplicationCommands.Paste"/>
                                                                </ContextMenu>
                                                            </TextBox.ContextMenu>
                                                        </TextBox>
                                                        <Grid>
                                                            <Grid.ColumnDefinitions>
                                                                <ColumnDefinition Width="40"/>
                                                                <ColumnDefinition />
                                                            </Grid.ColumnDefinitions>
                                                            <ComboBox x:Name="ComboType" Style="{DynamicResource ComboBoxMain}" ItemsSource="{Binding DataContext.FieldTypes, RelativeSource={RelativeSource AncestorType=ListBox}}" SelectedItem="{Binding Type}" SelectionChanged="ComboType_SelectionChanged" Grid.Column="1">
                                                                <ComboBox.ItemTemplate>
                                                                    <DataTemplate>
                                                                        <StackPanel Orientation="Horizontal">
                                                                            <Ellipse Width="5" Height="5" Fill="{Binding ., Converter={StaticResource FieldTypeToColorConverter}}"/>
                                                                            <Label Content="{Binding ., Converter={StaticResource FieldTypeToVisibleNameConverter}}" Style="{DynamicResource LabelElement}" FontSize="11"/>
                                                                            <!--<Label Content="{Binding ., Converter={StaticResource FieldTypeToVisibleNameConverter}}" Style="{DynamicResource LabelElement}" Foreground="{DynamicResource Icon}" FontSize="10"/>-->
                                                                        </StackPanel>
                                                                    </DataTemplate>
                                                                </ComboBox.ItemTemplate>
                                                            </ComboBox>
                                                            <Button Style="{StaticResource ButtonSquare}" Background="{StaticResource Dark}" ToolTip="Открыть настройки поля" Command="{Binding DataContext.OpenFieldSettings, RelativeSource={RelativeSource AncestorType=ListBox}}" CommandParameter="{Binding }">
                                                                <Path Fill="White" VerticalAlignment="Center" Data="M7.068.727c.243-.97 1.62-.97 1.864 0l.071.286a.96.96 0 0 0 1.622.434l.205-.211c.695-.719 1.888-.03 1.613.931l-.08.284a.96.96 0 0 0 1.187 1.187l.283-.081c.96-.275 1.65.918.931 1.613l-.211.205a.96.96 0 0 0 .434 1.622l.286.071c.97.243.97 1.62 0 1.864l-.286.071a.96.96 0 0 0-.434 1.622l.211.205c.719.695.03 1.888-.931 1.613l-.284-.08a.96.96 0 0 0-1.187 1.187l.081.283c.275.96-.918 1.65-1.613.931l-.205-.211a.96.96 0 0 0-1.622.434l-.071.286c-.243.97-1.62.97-1.864 0l-.071-.286a.96.96 0 0 0-1.622-.434l-.205.211c-.695.719-1.888.03-1.613-.931l.08-.284a.96.96 0 0 0-1.186-1.187l-.284.081c-.96.275-1.65-.918-.931-1.613l.211-.205a.96.96 0 0 0-.434-1.622l-.286-.071c-.97-.243-.97-1.62 0-1.864l.286-.071a.96.96 0 0 0 .434-1.622l-.211-.205c-.719-.695-.03-1.888.931-1.613l.284.08a.96.96 0 0 0 1.187-1.186l-.081-.284c-.275-.96.918-1.65 1.613-.931l.205.211a.96.96 0 0 0 1.622-.434zM12.973 8.5H8.25l-2.834 3.779A4.998 4.998 0 0 0 12.973 8.5m0-1a4.998 4.998 0 0 0-7.557-3.779l2.834 3.78zM5.048 3.967l-.087.065zm-.431.355A4.98 4.98 0 0 0 3.002 8c0 1.455.622 2.765 1.615 3.678L7.375 8zm.344 7.646.087.065z"/>
                                                            </Button>
                                                        </Grid>
                                                    </StackPanel>
                                                    <Rectangle Width="1" Fill="{DynamicResource Area}" Grid.Column="1" Visibility="{Binding BelongsVisibility}" HorizontalAlignment="Left"  Margin="-2,5,0,5" Opacity="0.5" />
                                                    <Button x:Name="RemoveButton" Style="{StaticResource ButtonSquare}" Visibility="{Binding BelongsVisibility}" Background="{StaticResource Dark}" ToolTip="Удалить поле" Grid.Column="1" Command="{Binding DataContext.RemoveField, RelativeSource={RelativeSource AncestorType=ListBox}}" CommandParameter="{Binding }">
                                                        <Path Fill="#FFFF7878" VerticalAlignment="Center" Stretch="Uniform" Margin="2" Data="M9.1182,16.61,12.6875,13.04,16.2568,16.61l.6462-.6462L13.3337,12.394,16.903,8.8248l-.6462-.6463-3.5693,3.5693L9.1182,8.1785l-.6462.6463,3.5692,3.5692L8.472,15.9633ZM12.692,21.24a8.6206,8.6206,0,0,1-3.4515-.6973,8.8354,8.8354,0,0,1-4.704-4.6995,8.8864,8.8864,0,0,1,.002-6.8965,8.8363,8.8363,0,0,1,4.7-4.704,8.8876,8.8876,0,0,1,6.8965.002,8.8363,8.8363,0,0,1,4.704,4.7,8.8864,8.8864,0,0,1-.002,6.8965,8.8354,8.8354,0,0,1-4.6995,4.704A8.6053,8.6053,0,0,1,12.692,21.24Zm-.0053-.9233A7.6448,7.6448,0,0,0,18.3025,18.01a7.6411,7.6411,0,0,0,2.308-5.6147A7.6453,7.6453,0,0,0,18.303,6.779a7.6416,7.6416,0,0,0-5.6148-2.308A7.645,7.645,0,0,0,7.0725,6.7785a7.6414,7.6414,0,0,0-2.308,5.6148A7.645,7.645,0,0,0,7.072,18.009,7.6411,7.6411,0,0,0,12.6867,20.317Z"/>
                                                    </Button>
                                                    <StackPanel Grid.Row="2" Grid.Column="1" VerticalAlignment="Center" Visibility="{Binding BelongsVisibility}">
                                                        <Button Style="{StaticResource ButtonSquare}" Background="{StaticResource Dark}"  ToolTip="Поднять выше" Grid.Column="1" Command="{Binding DataContext.MoveUpField, RelativeSource={RelativeSource AncestorType=ListBox}}" CommandParameter="{Binding }">
                                                            <Path Fill="DodgerBlue" VerticalAlignment="Center" Stretch="Uniform" Margin="4" Data="M13.04,11.1856l-4.2463,4.246a.5021.5021,0,0,1-.3442.15.4664.4664,0,0,1-.3633-.15.4716.4716,0,0,1,0-.7075l4.3883-4.3885a.7813.7813,0,0,1,1.131,0l4.3882,4.3885a.5024.5024,0,0,1,.15.3443.4662.4662,0,0,1-.15.3632.4714.4714,0,0,1-.7075,0Z"/>
                                                        </Button>
                                                        <Button Style="{StaticResource ButtonSquare}" Background="{StaticResource Dark}"  ToolTip="Опустить ниже" Grid.Column="1" Command="{Binding DataContext.MoveDownField, RelativeSource={RelativeSource AncestorType=ListBox}}" CommandParameter="{Binding }">
                                                            <Path Fill="DodgerBlue" VerticalAlignment="Center" Stretch="Uniform" Margin="4" Data="M -13.04 -11.1856 l 4.2463 -4.246 a 0.5021 0.5021 180 0 1 0.3442 -0.15 a 0.4664 0.4664 180 0 1 0.3633 0.15 a 0.4716 0.4716 180 0 1 0 0.7075 l -4.3883 4.3885 a 0.7813 0.7813 180 0 1 -1.131 0 l -4.3882 -4.3885 a 0.5024 0.5024 180 0 1 -0.15 -0.3443 a 0.4662 0.4662 180 0 1 0.15 -0.3632 a 0.4714 0.4714 180 0 1 0.7075 -0 Z"/>
                                                        </Button>
                                                    </StackPanel>
                                                </Grid>
                                            </Border>
                                        </DataTemplate>
                                    </ListBox.ItemTemplate>
                                </ListBox>
                                <Border Grid.Row="2" Grid.Column="3" VerticalAlignment="Top">
                                    <StackPanel Orientation="Vertical" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="0,5,0,0" Cursor="" >

                                        <Button Style="{StaticResource ButtonSquare}" Background="{StaticResource Black}" Click="AddFieldClick" ToolTip="Добавить поле">
                                            <Path Fill="{StaticResource Buttons.Green}" Data="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M8.5 4.5a.5.5 0 0 0-1 0v3h-3a.5.5 0 0 0 0 1h3v3a.5.5 0 0 0 1 0v-3h3a.5.5 0 0 0 0-1h-3z" VerticalAlignment="Center"/>
                                        </Button>
                                        <Button Style="{StaticResource ButtonSquare}" Background="{StaticResource Black}" Click="CopyFieldsFromAnotherClass" ToolTip="Скопировать поля из другого класса">
                                            <Path Fill="{StaticResource Buttons.Green}" VerticalAlignment="Center" Data="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5z M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5zm4.5 6V9H10a.5.5 0 0 1 0 1H8.5v1.5a.5.5 0 0 1-1 0V10H6a.5.5 0 0 1 0-1h1.5V7.5a.5.5 0 0 1 1 0"/>
                                        </Button>

                                        <Rectangle Height="1" Fill="{DynamicResource LightBlack}" Margin="4,2,4,2"/>

                                        <Button Style="{StaticResource ButtonSquare}" Background="{StaticResource Black}" Click="MinimizeAllClick" ToolTip="Свернуть все поля">
                                            <Path Fill="DodgerBlue" VerticalAlignment="Center" Stretch="Uniform" Data="M7.5519,19.8462V16.4385H4.1441v-.923H8.4749v4.3307Zm7.9855,0V15.5155h4.3185v.923H16.4606v3.4077ZM4.1441,8.472V7.549H7.5519V4.1538h.923V8.472Zm11.3933,0V4.1538h.9232V7.549h3.3953v.923Z"/>
                                        </Button>
                                        <Button Style="{StaticResource ButtonSquare}" Background="{StaticResource Black}" Click="MaximizeAllClick" ToolTip="Развернуть все поля">
                                            <Path Fill="DodgerBlue" VerticalAlignment="Center" Stretch="Uniform" Data="M4.1441,19.8462V15.5155h.9233V18.923H8.4749v.9232Zm11.3933,0V18.923h3.3952V15.5155h.9233v4.3307ZM4.1441,8.472V4.1538H8.4749V5.077H5.0674V8.472Zm14.7885,0V5.077H15.5374V4.1538h4.3185V8.472Z"/>
                                        </Button>

                                        <Rectangle Height="1" Fill="{DynamicResource LightBlack}" Margin="4,2,4,2"/>

                                        <Button Style="{StaticResource ButtonSquare}" Background="{StaticResource Black}" Click="GetMoreInfoClick" ToolTip="Открыть справочную информацию">
                                            <Path Fill="#FF78DDFF" VerticalAlignment="Center" Stretch="Uniform" Data="M12.9356,17.9427a.78.78,0,1,0-.5605-.2277A.7589.7589,0,0,0,12.9356,17.9427Zm-.5165-3.3115h.9655a2.7092,2.7092,0,0,1,.245-1.06,4.5017,4.5017,0,0,1,.851-1.04,6.9246,6.9246,0,0,0,.9963-1.199,2.2871,2.2871,0,0,0,.327-1.2265,2.3407,2.3407,0,0,0-.8308-1.8842A2.9485,2.9485,0,0,0,13.0076,7.52a2.89,2.89,0,0,0-1.8317.5865,3.6369,3.6369,0,0,0-1.1028,1.348l.919.3808A2.9346,2.9346,0,0,1,11.68,8.87a1.8167,1.8167,0,0,1,1.2895-.4192A1.7552,1.7552,0,0,1,14.39,8.984a1.7859,1.7859,0,0,1,.448,1.1742,1.5992,1.5992,0,0,1-.2808.9278,4.909,4.909,0,0,1-.7307.8222,5.0884,5.0884,0,0,0-1.1385,1.3595A3.1182,3.1182,0,0,0,12.4191,14.6312Zm.4918,7.0808a8.7726,8.7726,0,0,1-3.51-.7085A8.9859,8.9859,0,0,1,4.6169,16.224a9.0416,9.0416,0,0,1-.0008-7.019,8.9865,8.9865,0,0,1,4.78-4.7838,9.0422,9.0422,0,0,1,7.019-.0007A8.9865,8.9865,0,0,1,21.1984,9.2a9.0422,9.0422,0,0,1,.0007,7.019,8.9859,8.9859,0,0,1-4.78,4.7837A8.7525,8.7525,0,0,1,12.9109,21.712Zm-.0033-1a7.7211,7.7211,0,0,0,5.675-2.325,7.7211,7.7211,0,0,0,2.325-5.675,7.7209,7.7209,0,0,0-2.325-5.675,7.7211,7.7211,0,0,0-5.675-2.325,7.7211,7.7211,0,0,0-5.675,2.325,7.7209,7.7209,0,0,0-2.325,5.675,7.7211,7.7211,0,0,0,2.325,5.675A7.7211,7.7211,0,0,0,12.9076,20.712Z"/>
                                        </Button>
                                    </StackPanel>
                                </Border>
                            </Grid>
                        </TabItem>
                        <TabItem Header="Методы" BorderBrush="{DynamicResource DarkYellow}">

                        </TabItem>
                    </TabControl>
                    
                </Grid>
            </TabItem>
            <TabItem Header="Статусы" BorderBrush="{DynamicResource LightPurple}">

            </TabItem>
            <TabItem Header="Состояния" BorderBrush="{DynamicResource LightPurple}">
                
            </TabItem>
            <TabItem Header="Представление" BorderBrush="{StaticResource LightPurple}">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="4*" MinWidth="500"/>
                        <ColumnDefinition Width="7*"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition/>
                        <RowDefinition Height="40"/>
                    </Grid.RowDefinitions>
                    <StackPanel Grid.RowSpan="2" >
                        <Border Style="{StaticResource ToolBorder}">
                            <StackPanel>
                                <WrapPanel>
                                    <Button Style="{StaticResource ButtonSquare}" ToolTip="Добавить контейнер на форму" Click="AddControlToCustomFormClick">
                                        <Path Fill="{StaticResource Buttons.Green}" Data="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M8.5 4.5a.5.5 0 0 0-1 0v3h-3a.5.5 0 0 0 0 1h3v3a.5.5 0 0 0 1 0v-3h3a.5.5 0 0 0 0-1h-3z" VerticalAlignment="Center"/>
                                    </Button>
                                    <Button Style="{StaticResource ButtonSquare}" ToolTip="Удалить элемент" Click="RemoveSelectedElementFromForm" >
                                        <Path Fill="{StaticResource Buttons.Red}" Stretch="Uniform" Height="15" VerticalAlignment="Center" Data="m480-451.69 129.85 129.84q5.61 5.62 13.77 6 8.15.39 14.53-6 6.39-6.38 6.39-14.15 0-7.77-6.39-14.15L508.31-480l129.84-129.85q5.62-5.61 6-13.77.39-8.15-6-14.53-6.38-6.39-14.15-6.39-7.77 0-14.15 6.39L480-508.31 350.15-638.15q-5.61-5.62-13.77-6-8.15-.39-14.53 6-6.39 6.38-6.39 14.15 0 7.77 6.39 14.15L451.69-480 321.85-350.15q-5.62 5.61-6 13.77-.39 8.15 6 14.53 6.38 6.39 14.15 6.39 7.77 0 14.15-6.39L480-451.69Zm.13 331.69q-74.67 0-140.41-28.34-65.73-28.34-114.36-76.92-48.63-48.58-76.99-114.26Q120-405.19 120-479.87q0-74.67 28.34-140.41 28.34-65.73 76.92-114.36 48.58-48.63 114.26-76.99Q405.19-840 479.87-840q74.67 0 140.41 28.34 65.73 28.34 114.36 76.92 48.63 48.58 76.99 114.26Q840-554.81 840-480.13q0 74.67-28.34 140.41-28.34 65.73-76.92 114.36-48.58 48.63-114.26 76.99Q554.81-120 480.13-120Zm-.13-40q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z"/>
                                    </Button>
                                    <Button Style="{DynamicResource ButtonSquare}" ToolTip="Переместить выбранный элемент вверх" Click="MoveUpElementInForm" >
                                        <Path Fill="DodgerBlue" VerticalAlignment="Center" Stretch="Uniform" HorizontalAlignment="Center" Data="M460-541.08v176.46q0 8.5 5.76 14.25t14.27 5.75q8.51 0 14.62-5.97 6.12-5.97 6.12-14.79v-175.7l70.61 70.62q5.62 5.61 13.77 5.23 8.16-.39 13.77-6 5.62-5.62 5.62-13.9 0-8.28-5.62-13.64l-95.54-94.77q-9.69-9.69-22.61-9.69t-22.62 9.69L362.62-498q-5.62 5.62-5.62 13.38 0 7.77 5.62 13.39 5.61 5.61 13.89 5.61 8.28 0 13.64-5.61L460-541.08ZM480.13-120q-74.67 0-140.41-28.34-65.73-28.34-114.36-76.92-48.63-48.58-76.99-114.26Q120-405.19 120-479.87q0-74.67 28.34-140.41 28.34-65.73 76.92-114.36 48.58-48.63 114.26-76.99Q405.19-840 479.87-840q74.67 0 140.41 28.34 65.73 28.34 114.36 76.92 48.63 48.58 76.99 114.26Q840-554.81 840-480.13q0 74.67-28.34 140.41-28.34 65.73-76.92 114.36-48.58 48.63-114.26 76.99Q554.81-120 480.13-120Zm-.13-40q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z"/>
                                    </Button>
                                    <Button Style="{DynamicResource ButtonSquare}" ToolTip="Переместить выбранный элемент вниз" Click="MoveDownElementInForm" >
                                        <Path Fill="DodgerBlue" VerticalAlignment="Center" Stretch="Uniform" HorizontalAlignment="Center" Data="M -460 541.08 v -176.46 q -0 -8.5 -5.76 -14.25 t -14.27 -5.75 q -8.51 0 -14.62 5.97 q -6.12 5.97 -6.12 14.79 v 175.7 l -70.61 -70.62 q -5.62 -5.61 -13.77 -5.23 q -8.16 0.39 -13.77 6 q -5.62 5.62 -5.62 13.9 q 0 8.28 5.62 13.64 l 95.54 94.77 q 9.69 9.69 22.61 9.69 t 22.62 -9.69 L -362.62 498 q 5.62 -5.62 5.62 -13.38 q -0 -7.77 -5.62 -13.39 q -5.61 -5.61 -13.89 -5.61 q -8.28 0 -13.64 5.61 L -460 541.08 Z M -480.13 120 q 74.67 -0 140.41 28.34 q 65.73 28.34 114.36 76.92 q 48.63 48.58 76.99 114.26 Q -120 405.19 -120 479.87 q 0 74.67 -28.34 140.41 q -28.34 65.73 -76.92 114.36 q -48.58 48.63 -114.26 76.99 Q -405.19 840 -479.87 840 q -74.67 0 -140.41 -28.34 q -65.73 -28.34 -114.36 -76.92 q -48.63 -48.58 -76.99 -114.26 Q -840 554.81 -840 480.13 q -0 -74.67 28.34 -140.41 q 28.34 -65.73 76.92 -114.36 q 48.58 -48.63 114.26 -76.99 Q -554.81 120 -480.13 120 Z m 0.13 40 q -134 0 -227 93 t -93 227 q 0 134 93 227 t 227 93 q 134 -0 227 -93 t 93 -227 q -0 -134 -93 -227 t -227 -93 Z m 0 320 Z"/>
                                    </Button>
                                    <Button Style="{StaticResource ButtonSquare}" ToolTip="Обновить предварительный просмотр" Click="UpdateFormPreview" >
                                        <Path Fill="{StaticResource PrimaryMain}" VerticalAlignment="Center" Stretch="Uniform" Data="M6.1421,15.9157a7.44,7.44,0,0,1-.546-1.5365,7.01,7.01,0,0,1-.1885-1.6172,7.3041,7.3041,0,0,1,2.19-5.3443,7.2049,7.2049,0,0,1,5.31-2.2057h1.3865l-2.1-2.1.7078-.7078L16.21,5.712,12.9019,9.02l-.7078-.7077,2.1-2.1H12.9076A6.2484,6.2484,0,0,0,8.3019,8.1187,6.34,6.34,0,0,0,6.4076,12.762a6.3361,6.3361,0,0,0,.4845,2.4037Zm6.7713,7.104L9.6056,19.712l3.3078-3.3078.7077.7078-2.1,2.1h1.3865a6.2488,6.2488,0,0,0,4.6058-1.9068,6.3406,6.3406,0,0,0,1.8942-4.6432,6.331,6.331,0,0,0-.4845-2.4038l.75-.75a7.44,7.44,0,0,1,.546,1.5365,7.01,7.01,0,0,1,.1885,1.6173,7.3041,7.3041,0,0,1-2.19,5.3442,7.205,7.205,0,0,1-5.3095,2.2058H11.5211l2.1,2.1Z"/>
                                    </Button>
                                </WrapPanel>
                                <Grid MaxHeight="300">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="auto"/>
                                        <ColumnDefinition />
                                    </Grid.ColumnDefinitions>
                                    <TreeView Grid.Column="1" Style="{StaticResource TreeViewMain}" Margin="5" MinHeight="40" ItemsSource="{Binding ViewControls}" MaxHeight="300" ScrollViewer.HorizontalScrollBarVisibility="Hidden" SelectedItemChanged="TreeView_SelectedItemChanged">
                                        <TreeView.ItemTemplate>
                                            <HierarchicalDataTemplate ItemsSource="{Binding Children}">
                                                <StackPanel Orientation="Horizontal">
                                                    <Path Fill="{Binding Type, Converter={StaticResource ViewControlTypeToColorConverter}}" Stretch="Uniform" MaxHeight="10" Data="{Binding Type, Converter={StaticResource ViewControlTypeToIconConverter}}"/>
                                                    <TextBlock Margin="5,0,0,0" Text="{Binding Name}" TextTrimming="WordEllipsis" TextWrapping="WrapWithOverflow" Foreground="White" />
                                                </StackPanel>

                                            </HierarchicalDataTemplate>
                                        </TreeView.ItemTemplate>
                                    </TreeView>
                                    <Border Grid.Column="0" CornerRadius="8" MaxWidth="200" Background="{DynamicResource Dark}">
                                        <ListBox Style="{StaticResource ListBoxMain}" ScrollViewer.HorizontalScrollBarVisibility="Disabled" ItemsSource="{Binding Fields}" ItemContainerStyle="{StaticResource ListBoxItemUnvisibleBorders}" MaxWidth="200">
                                            <ListBox.ItemTemplate>
                                                <DataTemplate>
                                                    <Border Background="{StaticResource LightBlack}" CornerRadius="2" Margin="2" ClipToBounds="True">
                                                        <Grid MaxHeight="30">
                                                            <Grid.ColumnDefinitions>
                                                                <ColumnDefinition MaxWidth="120"/>
                                                                <ColumnDefinition Width="30"/>
                                                            </Grid.ColumnDefinitions>
                                                            <TextBlock Margin="5" Text="{Binding Name}" TextTrimming="WordEllipsis" TextWrapping="WrapWithOverflow" VerticalAlignment="Center"/>
                                                            <Button Style="{StaticResource ButtonSquare}" Grid.Column="1" MaxHeight="25" Margin="0" ToolTip="Определить поле в выбранный контейнер" HorizontalAlignment="Left" Command="{Binding AssignToContainer}" >
                                                                <StackPanel Orientation="Horizontal">
                                                                    <Path Fill="{StaticResource Buttons.Green}" VerticalAlignment="Center" Stretch="Uniform" Height="12" Data="M421.46-480 251.85-649.85q-5.62-5.61-6.12-13.65t6.12-14.65q6.38-6.39 14.15-6.39 7.77 0 14.15 6.39l175.54 175.53q5.23 5.24 7.35 10.7 2.11 5.46 2.11 11.92t-2.11 11.92q-2.12 5.46-7.35 10.7L280.15-281.85q-5.61 5.62-13.65 6.12t-14.65-6.12q-6.39-6.38-6.39-14.15 0-7.77 6.39-14.15L421.46-480Zm244 0L495.85-649.85q-5.62-5.61-6.12-13.65t6.12-14.65q6.38-6.39 14.15-6.39 7.77 0 14.15 6.39l175.54 175.53q5.23 5.24 7.35 10.7 2.11 5.46 2.11 11.92t-2.11 11.92q-2.12 5.46-7.35 10.7L524.15-281.85q-5.61 5.62-13.65 6.12t-14.65-6.12q-6.39-6.38-6.39-14.15 0-7.77 6.39-14.15L665.46-480Z"/>
                                                                </StackPanel>
                                                            </Button>
                                                        </Grid>
                                                    </Border>

                                                </DataTemplate>
                                            </ListBox.ItemTemplate>
                                        </ListBox>
                                    </Border>
                                </Grid>
                                
                            </StackPanel>
                        </Border>
                        <Border Style="{StaticResource ToolBorder}">
                            <StackPanel>
                                <TextBox Style="{StaticResource TextBoxMain}" Tag="Имя контейнера" Text="{Binding SelectedViewControl.Name}"/>
                                
                                <ComboBox Style="{StaticResource ComboBoxMain}" Visibility="{Binding SelectedViewControl.ContainerSettingsVisibility}" Tag="Имя контейнера" ItemsSource="{Binding AvailableControlTypes}" SelectedItem="{Binding SelectedViewControl.Type}">
                                    <ComboBox.ItemTemplate>
                                        <DataTemplate>
                                            <StackPanel Orientation="Horizontal">
                                                <Path Fill="{StaticResource LightYellow}" Stretch="Uniform" Height="12" Data="{Binding ., Converter={StaticResource ViewControlTypeToIconConverter}}"/>
                                                <Label Content="{Binding ., Converter={StaticResource ViewControlTypeToVisibleNameConverter}}" Foreground="White"/>
                                            </StackPanel>
                                        </DataTemplate>
                                    </ComboBox.ItemTemplate>
                                </ComboBox>
                                <CheckBox Content="Виден на форме" Visibility="{Binding SelectedViewControl.ContainerSettingsVisibility}" />
                                <CheckBox Content="Доступен для редактирования" Visibility="{Binding SelectedViewControl.ContainerSettingsVisibility}" />
                                <Button Style="{StaticResource ButtonRectangle}" Visibility="{Binding SelectedViewControl.ContainerSettingsVisibility}" ToolTip="Добавить новый вложенный контейнер" HorizontalAlignment="Left" Grid.Column="2" Click="AddChildContainerToViewControl" >
                                    <StackPanel Orientation="Horizontal">
                                        <Path Fill="{StaticResource Buttons.Green}" VerticalAlignment="Center" Stretch="Uniform" Data="M8.004,19.3885V9.6135a1.5425,1.5425,0,0,1,.475-1.141A1.573,1.573,0,0,1,9.6252,8.004h9.7633A1.62,1.62,0,0,1,21.004,9.62v6.29a1.5674,1.5674,0,0,1-.1308.6323,1.6576,1.6576,0,0,1-.348.5177L17.06,20.5252a1.6576,1.6576,0,0,1-.5177.348,1.5674,1.5674,0,0,1-.6323.1308H9.62A1.62,1.62,0,0,1,8.004,19.3885ZM3.029,6.6a1.5057,1.5057,0,0,1,.2567-1.2127,1.6084,1.6084,0,0,1,1.06-.6643L13.9655,3.029a1.5057,1.5057,0,0,1,1.2127.2567,1.61,1.61,0,0,1,.6643,1.06L16.054,5.62H9.62a4.0118,4.0118,0,0,0-4,4V17.4a1.6446,1.6446,0,0,1-.5818-.475,1.62,1.62,0,0,1-.3145-.7057ZM14.004,15.004v2.5a.5.5,0,1,0,1,0v-2.5h2.5a.5.5,0,1,0,0-1h-2.5v-2.5a.5.5,0,1,0-1,0v2.5h-2.5a.5.5,0,1,0,0,1Z"/>
                                        <Label Content="Добавить вложенный контейнер" Foreground="White"/>
                                    </StackPanel>
                                </Button>
                            </StackPanel>
                        </Border>
                        
                    </StackPanel>

                    <extended:Zoombox x:Name="ZoomPanel" Grid.Column="1" Scale="{Binding PreviewFormZoom}" ScrollViewer.HorizontalScrollBarVisibility="Hidden"  ZoomPercentage="1" MinScale="0.5" AnimationDuration="00:00:00.12" MaxScale="3" ViewStackMode="Disabled">
                        <Border Margin="5" CornerRadius="8" MinWidth="600" MaxWidth="600" Background="{DynamicResource Dark}" Cursor="" Padding="0,0,0,5">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="40"/>
                                    <RowDefinition Height="2"/>
                                    <RowDefinition />
                                </Grid.RowDefinitions>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition/>
                                    <ColumnDefinition Width="40"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel Orientation="Horizontal" Grid.Row="0" >
                                    <CheckBox Style="{StaticResource ExpanderButton}" IsChecked="True" IsEnabled="False"/>
                                    <Rectangle Width="1" Fill="{DynamicResource Area}" Margin="0,5,0,5" Opacity="0.5" />
                                    <TextBox x:Name="ObjectName" Style="{DynamicResource TextBoxTransparent}" IsReadOnly="True" Text="Предварительный просмотр редактора объекта" Margin="5,0,0,0">
                                        <TextBox.ContextMenu>
                                            <ContextMenu>

                                            </ContextMenu>
                                        </TextBox.ContextMenu>
                                    </TextBox>
                                </StackPanel>
                                <Rectangle Fill="{DynamicResource Area}" Opacity="0.5" HorizontalAlignment="Left" Grid.Column="1" Width="1" Margin="0,5,0,5"/>
                                <Button Style="{StaticResource ButtonSquare}" Background="{StaticResource Dark}" IsEnabled="False" ToolTip="Удалить объект из очереди редактирования" Grid.Column="1">
                                    <Path Fill="#FFFF7878" VerticalAlignment="Center" Stretch="Uniform" Margin="2" Data="M9.1182,16.61,12.6875,13.04,16.2568,16.61l.6462-.6462L13.3337,12.394,16.903,8.8248l-.6462-.6463-3.5693,3.5693L9.1182,8.1785l-.6462.6463,3.5692,3.5692L8.472,15.9633ZM12.692,21.24a8.6206,8.6206,0,0,1-3.4515-.6973,8.8354,8.8354,0,0,1-4.704-4.6995,8.8864,8.8864,0,0,1,.002-6.8965,8.8363,8.8363,0,0,1,4.7-4.704,8.8876,8.8876,0,0,1,6.8965.002,8.8363,8.8363,0,0,1,4.704,4.7,8.8864,8.8864,0,0,1-.002,6.8965,8.8354,8.8354,0,0,1-4.6995,4.704A8.6053,8.6053,0,0,1,12.692,21.24Zm-.0053-.9233A7.6448,7.6448,0,0,0,18.3025,18.01a7.6411,7.6411,0,0,0,2.308-5.6147A7.6453,7.6453,0,0,0,18.303,6.779a7.6416,7.6416,0,0,0-5.6148-2.308A7.645,7.645,0,0,0,7.0725,6.7785a7.6414,7.6414,0,0,0-2.308,5.6148A7.645,7.645,0,0,0,7.072,18.009,7.6411,7.6411,0,0,0,12.6867,20.317Z"/>
                                </Button>

                                <Rectangle Grid.Row="1" Fill="{DynamicResource Area}" Grid.ColumnSpan="2"/>

                                <StackPanel x:Name="FormPreviewPanel" Margin="5" Grid.Row="2" Grid.ColumnSpan="2" >

                                </StackPanel>
                            </Grid>
                        </Border>
                    </extended:Zoombox>
                    <Slider Grid.Row="1" Grid.Column="1" VerticalAlignment="Center" MinWidth="200" HorizontalAlignment="Center" Minimum="0.1" Maximum="100" Value="{Binding PreviewFormZoom}"/>
                </Grid>
            </TabItem>
            <!--<TabItem Header="Проверка">
                <ngv:FlowChartView Background="{DynamicResource Black}" DataContext="{Binding FlowChartViewModel}" />
            </TabItem>-->
        </TabControl>
        <StackPanel Grid.Row="2" Grid.ColumnSpan="3" Margin="5,0,0,0" Orientation="Horizontal">
            <Button Style="{DynamicResource ButtonRectangle}" Background="{StaticResource Dark}" VerticalAlignment="Center"  IsDefault="True" Click="SaveClick" Grid.Row="3">
                <StackPanel Orientation="Horizontal" Margin="5,0,5,0">
                    <Path Fill="{StaticResource Buttons.Green}" Data="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0m-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z" VerticalAlignment="Center"/>
                    <Label Foreground="White" Content="Сохранить класс"/>
                </StackPanel>
            </Button>
        </StackPanel>
    </Grid>
</Window>
